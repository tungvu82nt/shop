import{j as s}from"./ui-vendor-S1POobSh.js";import{u as _,r as c}from"./react-vendor-DrHQLvTy.js";import{r as k,h as ss,B as a,D as L,o as M,p as B,R as z,V as F,c as p,i as f,j as N,d as j,K as o,W as es,Y as ts,J as V,I as as,G as A,g as R}from"./index-B_z83aGI.js";import{w as h,O as U,W as G}from"./WishlistButton-DcIgUw2y.js";import{S as ns,a as cs,b as rs,c as ls,d}from"./select-gZt-o9w_.js";import{S as is,a as ds,b as os,c as hs,d as xs}from"./sheet-N8TNJy76.js";import{T as ms}from"./textarea-BcKww7Dv.js";import{U as ps}from"./upload-MZjEumbl.js";import{G as js,L as us}from"./list-CSrzmTAL.js";import{F as gs}from"./filter-CDTGhXC7.js";import"./chart-vendor-Bfyd95vO.js";import"./supabase-vendor-C-7U-qZP.js";import"./form-vendor-CeA2iSy3.js";import"./chevron-down-B_2yl-Ju.js";import"./chevron-up-DCfO1O8C.js";function zs(){const y=_(),[l,H]=c.useState(null),[n,P]=c.useState(null),[x,w]=c.useState({sortBy:"addedAt",sortOrder:"desc"}),[u,C]=c.useState(""),[m,S]=c.useState("grid"),[E,W]=c.useState(!1),[Y,$]=c.useState(!1),[K,v]=c.useState(!1),[g,D]=c.useState("");c.useEffect(()=>h.subscribe(t=>{H(t),P(h.getStats())}),[]);const b=(()=>{if(!l)return[];let e=h.getItems(x);if(u.trim()){const t=u.toLowerCase().trim();e=e.filter(r=>{var i,O,T;return r.product.name.toLowerCase().includes(t)||((i=r.product.description)==null?void 0:i.toLowerCase().includes(t))||((O=r.product.category)==null?void 0:O.toLowerCase().includes(t))||((T=r.product.brand)==null?void 0:T.toLowerCase().includes(t))})}return e})(),Q=e=>{w(t=>({...t,...e}))},I=()=>{w({sortBy:"addedAt",sortOrder:"desc"}),C("")},q=e=>{y(`/product/${e.id}`)},X=()=>{const e=h.exportData(),t=new Blob([e],{type:"application/json"}),r=URL.createObjectURL(t),i=document.createElement("a");i.href=r,i.download=`wishlist-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)},J=()=>{g.trim()&&h.importData(g)&&(D(""),v(!1))},Z=()=>{window.confirm("Bạn có chắc chắn muốn xóa toàn bộ danh sách yêu thích?")&&h.clearAll()};return!l||l.items.length===0?s.jsxs(s.Fragment,{children:[s.jsxs(k,{children:[s.jsx("title",{children:"Danh sách yêu thích - Yapee Vietnam"}),s.jsx("meta",{name:"description",content:"Quản lý danh sách sản phẩm yêu thích của bạn trên Yapee Vietnam"})]}),s.jsx("div",{className:"min-h-screen bg-background",children:s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"text-center py-16",children:[s.jsx(ss,{className:"h-24 w-24 text-gray-300 mx-auto mb-6"}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Danh sách yêu thích trống"}),s.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Bạn chưa có sản phẩm nào trong danh sách yêu thích. Hãy khám phá và thêm những sản phẩm bạn thích!"}),s.jsx(a,{onClick:()=>y("/"),size:"lg",children:"Khám phá sản phẩm"})]})})})]}):s.jsxs(s.Fragment,{children:[s.jsxs(k,{children:[s.jsxs("title",{children:["Danh sách yêu thích (",l.totalItems,") - Yapee Vietnam"]}),s.jsx("meta",{name:"description",content:`Quản lý ${l.totalItems} sản phẩm yêu thích của bạn trên Yapee Vietnam`})]}),s.jsx("div",{className:"min-h-screen bg-background",children:s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Danh sách yêu thích"}),s.jsxs("p",{className:"text-gray-600",children:[l.totalItems," sản phẩm • Cập nhật lần cuối: "," ",new Date(l.lastUpdated).toLocaleString("vi-VN")]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(L,{open:Y,onOpenChange:$,children:[s.jsx(M,{asChild:!0,children:s.jsx(a,{variant:"outline",size:"sm",children:"Thống kê"})}),s.jsxs(B,{className:"max-w-2xl",children:[s.jsx(z,{children:s.jsx(F,{children:"Thống kê danh sách yêu thích"})}),n&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs(p,{children:[s.jsx(f,{children:s.jsx(N,{className:"text-sm",children:"Tổng quan"})}),s.jsxs(j,{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Tổng sản phẩm:"}),s.jsx("span",{className:"font-semibold",children:n.totalItems})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Tổng giá trị:"}),s.jsx("span",{className:"font-semibold",children:o(n.totalValue)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Giá trung bình:"}),s.jsx("span",{className:"font-semibold",children:o(n.averagePrice)})]})]})]}),s.jsxs(p,{children:[s.jsx(f,{children:s.jsx(N,{className:"text-sm",children:"Khoảng giá"})}),s.jsxs(j,{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Dưới 1M:"}),s.jsx("span",{children:n.priceRanges.under1M})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"1M - 5M:"}),s.jsx("span",{children:n.priceRanges.from1Mto5M})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"5M - 10M:"}),s.jsx("span",{children:n.priceRanges.from5Mto10M})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Trên 10M:"}),s.jsx("span",{children:n.priceRanges.over10M})]})]})]}),s.jsxs(p,{children:[s.jsx(f,{children:s.jsx(N,{className:"text-sm",children:"Danh mục"})}),s.jsx(j,{children:s.jsx("div",{className:"space-y-2",children:Object.entries(n.categoriesCount).map(([e,t])=>s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:[e,":"]}),s.jsx("span",{children:t})]},e))})})]}),s.jsxs(p,{children:[s.jsx(f,{children:s.jsx(N,{className:"text-sm",children:"Thương hiệu"})}),s.jsx(j,{children:s.jsx("div",{className:"space-y-2",children:Object.entries(n.brandsCount).map(([e,t])=>s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:[e,":"]}),s.jsx("span",{children:t})]},e))})})]})]})]})]}),s.jsxs(a,{variant:"outline",size:"sm",onClick:X,children:[s.jsx(es,{className:"h-4 w-4 mr-2"}),"Export"]}),s.jsxs(L,{open:K,onOpenChange:v,children:[s.jsx(M,{asChild:!0,children:s.jsxs(a,{variant:"outline",size:"sm",children:[s.jsx(ps,{className:"h-4 w-4 mr-2"}),"Import"]})}),s.jsxs(B,{children:[s.jsx(z,{children:s.jsx(F,{children:"Import danh sách yêu thích"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(ms,{placeholder:"Dán dữ liệu JSON vào đây...",value:g,onChange:e=>D(e.target.value),rows:10}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(a,{variant:"outline",onClick:()=>v(!1),children:"Hủy"}),s.jsx(a,{onClick:J,disabled:!g.trim(),children:"Import"})]})]})]})]}),s.jsxs(a,{variant:"destructive",size:"sm",onClick:Z,children:[s.jsx(ts,{className:"h-4 w-4 mr-2"}),"Xóa tất cả"]})]})]}),s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(V,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx(as,{placeholder:"Tìm kiếm sản phẩm...",value:u,onChange:e=>C(e.target.value),className:"pl-10"})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ns,{value:`${x.sortBy}-${x.sortOrder}`,onValueChange:e=>{const[t,r]=e.split("-");Q({sortBy:t,sortOrder:r})},children:[s.jsx(cs,{className:"w-48",children:s.jsx(rs,{})}),s.jsxs(ls,{children:[s.jsx(d,{value:"addedAt-desc",children:"Mới nhất"}),s.jsx(d,{value:"addedAt-asc",children:"Cũ nhất"}),s.jsx(d,{value:"price-asc",children:"Giá thấp đến cao"}),s.jsx(d,{value:"price-desc",children:"Giá cao đến thấp"}),s.jsx(d,{value:"name-asc",children:"Tên A-Z"}),s.jsx(d,{value:"name-desc",children:"Tên Z-A"}),s.jsx(d,{value:"rating-desc",children:"Đánh giá cao nhất"})]})]}),s.jsxs("div",{className:"flex border rounded-md",children:[s.jsx(a,{variant:m==="grid"?"default":"ghost",size:"sm",onClick:()=>S("grid"),className:"rounded-r-none",children:s.jsx(js,{className:"h-4 w-4"})}),s.jsx(a,{variant:m==="list"?"default":"ghost",size:"sm",onClick:()=>S("list"),className:"rounded-l-none",children:s.jsx(us,{className:"h-4 w-4"})})]}),s.jsxs(is,{open:E,onOpenChange:W,children:[s.jsx(ds,{asChild:!0,children:s.jsxs(a,{variant:"outline",size:"sm",className:"lg:hidden",children:[s.jsx(gs,{className:"h-4 w-4 mr-2"}),"Lọc"]})}),s.jsx(os,{children:s.jsx(hs,{children:s.jsx(xs,{children:"Bộ lọc"})})})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Hiển thị ",b.length," / ",l.totalItems," sản phẩm"]}),(u||Object.keys(x).some(e=>e!=="sortBy"&&e!=="sortOrder"&&x[e]))&&s.jsx(a,{variant:"ghost",size:"sm",onClick:I,children:"Xóa bộ lọc"})]}),b.length===0?s.jsxs("div",{className:"text-center py-16",children:[s.jsx(V,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Không tìm thấy sản phẩm"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Thử thay đổi từ khóa tìm kiếm hoặc bộ lọc"}),s.jsx(a,{variant:"outline",onClick:I,children:"Xóa bộ lọc"})]}):s.jsx("div",{className:A(m==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4"),children:b.map(e=>s.jsx("div",{className:A("group cursor-pointer",m==="list"&&"flex gap-4 p-4 border rounded-lg hover:shadow-md transition-shadow"),onClick:()=>q(e.product),children:m==="grid"?s.jsxs(p,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"relative aspect-square",children:[s.jsx(U,{src:e.product.imageUrl,alt:e.product.name,className:"w-full h-full object-cover",category:e.product.category}),s.jsx("div",{className:"absolute top-2 right-2",children:s.jsx(G,{product:e.product,iconOnly:!0,size:"sm"})}),e.product.discount&&s.jsxs(R,{className:"absolute top-2 left-2 bg-red-500",children:["-",e.product.discount,"%"]})]}),s.jsxs(j,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold text-sm mb-2 line-clamp-2",children:e.product.name}),s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-lg font-bold text-red-600",children:o(e.product.price)}),e.product.originalPrice&&s.jsx("span",{className:"text-sm text-gray-500 line-through",children:o(e.product.originalPrice)})]}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsx("span",{children:e.product.location}),s.jsxs("span",{children:["Đã bán ",e.product.soldCount]})]}),e.notes&&s.jsxs("p",{className:"text-xs text-gray-600 mt-2 italic",children:["Ghi chú: ",e.notes]}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Thêm vào: ",new Date(e.addedAt).toLocaleDateString("vi-VN")]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-32 h-32 flex-shrink-0",children:s.jsx(U,{src:e.product.imageUrl,alt:e.product.name,className:"w-full h-full object-cover rounded-lg",category:e.product.category})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx("h3",{className:"font-semibold text-lg mb-2 line-clamp-2",children:e.product.name}),s.jsx(G,{product:e.product,iconOnly:!0,size:"sm"})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.product.description}),s.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[s.jsx("span",{className:"text-xl font-bold text-red-600",children:o(e.product.price)}),e.product.originalPrice&&s.jsx("span",{className:"text-sm text-gray-500 line-through",children:o(e.product.originalPrice)}),e.product.discount&&s.jsxs(R,{variant:"destructive",children:["-",e.product.discount,"%"]})]}),s.jsx("div",{className:"flex items-center justify-between text-sm text-gray-500",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{children:e.product.location}),s.jsxs("span",{children:["Đã bán ",e.product.soldCount]}),s.jsxs("span",{children:["Thêm vào: ",new Date(e.addedAt).toLocaleDateString("vi-VN")]})]})}),e.notes&&s.jsxs("p",{className:"text-sm text-gray-600 mt-2 italic",children:["Ghi chú: ",e.notes]})]})]})},e.productId))})]})})]})}export{zs as WishlistPage,zs as default};
//# sourceMappingURL=WishlistPage-DZiBw0VQ.js.map
