import{j as e}from"./ui-vendor-S1POobSh.js";import{r as a,u as S,L as b}from"./react-vendor-DrHQLvTy.js";import{u as L,b as E,s as j}from"./form-vendor-CeA2iSy3.js";import{u as A,l as o,M as F,I as y,ao as I,a8 as M,a7 as P,B as C,m as n,b as m,ap as _}from"./index-B_z83aGI.js";import{A as B}from"./AuthLayout-DxpTxSLH.js";import"./chart-vendor-Bfyd95vO.js";import"./supabase-vendor-C-7U-qZP.js";import"./shield-CnI5vR7_.js";import"./users-B4TySy3P.js";import"./arrow-left-Bup_IKS6.js";const T=E({email:j().email("Email không hợp lệ"),password:j().min(6,"Mật khẩu phải có ít nhất 6 ký tự")});function K(){const[r,N]=a.useState(!1),[c,h]=a.useState(!1),[d,u]=a.useState(!1),{signIn:w,userProfile:l,user:p}=A(),i=S();a.useEffect(()=>{d&&l&&p&&(l.role==="admin"?i("/admin"):i("/"),u(!1))},[d,l,p,i]);const{register:x,handleSubmit:k,formState:{errors:t}}=L({resolver:_(T)}),v=async g=>{var f;h(!0);try{const s=await w(g.email,g.password);if(s.error){n.error(s.error.message||"Đăng nhập thất bại"),m.trackAuth("login_failed",{method:"email",error:s.error.message||"Login failed"});return}n.success("Đăng nhập thành công!"),m.trackAuth("login",{method:"email",user_id:(f=s.user)==null?void 0:f.id}),u(!0)}catch(s){n.error(s.message||"Đăng nhập thất bại"),m.trackAuth("login_failed",{method:"email",error:s.message||"Unknown error"})}finally{h(!1)}};return e.jsx(B,{title:"Chào mừng trở lại",subtitle:"Đăng nhập vào tài khoản của bạn",children:e.jsxs("form",{onSubmit:k(v),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(F,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(y,{id:"email",type:"email",placeholder:"Nhập email của bạn",className:"pl-10",...x("email")})]}),t.email&&e.jsx("p",{className:"text-sm text-red-600",children:t.email.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"password",children:"Mật khẩu"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(y,{id:"password",type:r?"text":"password",placeholder:"Nhập mật khẩu",className:"pl-10 pr-10",...x("password")}),e.jsx("button",{type:"button",onClick:()=>N(!r),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r?e.jsx(M,{className:"h-4 w-4"}):e.jsx(P,{className:"h-4 w-4"})})]}),t.password&&e.jsx("p",{className:"text-sm text-red-600",children:t.password.message})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"remember",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx(o,{htmlFor:"remember",className:"text-sm",children:"Ghi nhớ đăng nhập"})]}),e.jsx(b,{to:"/forgot-password",className:"text-sm text-blue-600 hover:text-blue-500",children:"Quên mật khẩu?"})]}),e.jsx(C,{type:"submit",className:"w-full",disabled:c,children:c?"Đang đăng nhập...":"Đăng nhập"}),e.jsx("div",{className:"text-center",children:e.jsxs("span",{className:"text-sm text-gray-600",children:["Chưa có tài khoản?"," ",e.jsx(b,{to:"/register",className:"text-blue-600 hover:text-blue-500 font-medium",children:"Đăng ký ngay"})]})})]})})}export{K as default};
//# sourceMappingURL=LoginPage-BwTYTkVg.js.map
