{"version":3,"file":"ProductCard-DGlgknfq.js","sources":["../../src/components/product/ProductCard.tsx"],"sourcesContent":["import { Link } from 'react-router-dom'\nimport { Star, MapPin, ShoppingCart } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { Badge } from '@/components/ui/badge'\nimport { Card, CardContent } from '@/components/ui/card'\nimport OptimizedImage from '@/components/ui/OptimizedImage'\nimport { WishlistButton } from '@/components/wishlist/WishlistButton'\nimport { Product } from '@/types'\nimport { formatPrice, cn } from '@/lib/utils'\nimport { analytics } from '@/lib/analytics'\n\ninterface ProductCardProps {\n  product: Product\n  variant?: 'default' | 'compact' | 'featured'\n  showWishlist?: boolean\n  showAddToCart?: boolean\n  className?: string\n  onClick?: (product: Product) => void\n}\n\nconst ProductCard = ({\n  product,\n  variant = 'default',\n  showWishlist = true,\n  showAddToCart = false,\n  className,\n  onClick\n}: ProductCardProps) => {\n  const handleClick = () => {\n    if (onClick) {\n      onClick(product)\n    }\n  }\n\n  const handleAddToCart = (e: React.MouseEvent) => {\n    e.preventDefault()\n    e.stopPropagation()\n    \n    // Track add to cart analytics\n    analytics.trackEcommerce('add_to_cart', {\n      currency: 'VND',\n      value: product.price,\n      items: [{\n        item_id: product.id.toString(),\n        item_name: product.name,\n        item_category: product.category,\n        item_brand: product.brand,\n        price: product.price,\n        quantity: 1\n      }]\n    });\n    \n    // TODO: Implement add to cart functionality\n    console.log('Add to cart:', product.id)\n  }\n\n  // Tính toán rating stars\n  const renderStars = (rating: number) => {\n    const stars = []\n    const fullStars = Math.floor(rating)\n    const hasHalfStar = rating % 1 !== 0\n\n    for (let i = 0; i < fullStars; i++) {\n      stars.push(\n        <Star key={i} className=\"h-3 w-3 fill-yellow-400 text-yellow-400\" />\n      )\n    }\n\n    if (hasHalfStar) {\n      stars.push(\n        <Star key=\"half\" className=\"h-3 w-3 fill-yellow-400/50 text-yellow-400\" />\n      )\n    }\n\n    const emptyStars = 5 - Math.ceil(rating)\n    for (let i = 0; i < emptyStars; i++) {\n      stars.push(\n        <Star key={`empty-${i}`} className=\"h-3 w-3 text-gray-300\" />\n      )\n    }\n\n    return stars\n  }\n\n  return (\n    <Card \n      className={cn(\n        'group cursor-pointer hover:shadow-lg transition-all duration-200 overflow-hidden',\n        className\n      )}\n      onClick={handleClick}\n    >\n      <Link \n        to={`/product/${product.id}`} \n        className=\"block\"\n        onClick={() => {\n          // Track product view analytics\n          analytics.trackEcommerce('view_item', {\n            currency: 'VND',\n            value: product.price,\n            items: [{\n              item_id: product.id.toString(),\n              item_name: product.name,\n              item_category: product.category,\n              item_brand: product.brand,\n              price: product.price,\n              quantity: 1\n            }]\n          });\n        }}\n      >\n        <div className=\"relative aspect-square\">\n          <OptimizedImage\n            src={product.imageUrl}\n            alt={product.name}\n            className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200\"\n            category={product.category}\n          />\n          \n          {/* Badges */}\n          <div className=\"absolute top-2 left-2 flex flex-col gap-1\">\n            {product.discount && (\n              <Badge className=\"bg-red-500 text-white text-xs\">\n                -{product.discount}%\n              </Badge>\n            )}\n            {product.isFeatured && (\n              <Badge className=\"bg-yellow-500 text-white text-xs\">\n                Hot\n              </Badge>\n            )}\n          </div>\n          \n          {/* Wishlist Button */}\n          {showWishlist && (\n            <div className=\"absolute top-2 right-2\">\n              <WishlistButton\n                product={product}\n                iconOnly\n                size=\"sm\"\n              />\n            </div>\n          )}\n          \n          {/* Quick Add to Cart */}\n          {showAddToCart && (\n            <div className=\"absolute bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200\">\n              <Button\n                size=\"sm\"\n                variant=\"secondary\"\n                className=\"bg-white/90 hover:bg-white\"\n                onClick={handleAddToCart}\n              >\n                <ShoppingCart className=\"h-4 w-4\" />\n              </Button>\n            </div>\n          )}\n        </div>\n        \n        <CardContent className=\"p-4\">\n          <h3 className=\"font-semibold text-sm mb-2 line-clamp-2\">\n            {product.name}\n          </h3>\n          \n          <div className=\"flex items-center gap-1 mb-2\">\n            <div className=\"flex items-center\">\n              {renderStars(product.rating || 0)}\n            </div>\n            <span className=\"text-xs text-gray-600 ml-1\">\n              ({product.reviewCount || 0})\n            </span>\n          </div>\n          \n          <div className=\"flex items-center justify-between mb-2\">\n            <span className=\"text-lg font-bold text-red-600\">\n              {formatPrice(product.price)}\n            </span>\n            {product.originalPrice && (\n              <span className=\"text-sm text-gray-500 line-through\">\n                {formatPrice(product.originalPrice)}\n              </span>\n            )}\n          </div>\n          \n          <div className=\"flex items-center justify-between text-xs text-gray-500\">\n            <div className=\"flex items-center gap-1\">\n              <MapPin className=\"h-3 w-3\" />\n              <span className=\"truncate\">{product.location}</span>\n            </div>\n            <span>Đã bán {product.soldCount}</span>\n          </div>\n        </CardContent>\n      </Link>\n    </Card>\n  )\n}\n\nexport default ProductCard\nexport { ProductCard }"],"names":["ProductCard","product","variant","showWishlist","showAddToCart","className","onClick","handleClick","handleAddToCart","e","analytics","renderStars","rating","stars","fullStars","hasHalfStar","i","jsx","Star","emptyStars","Card","cn","jsxs","Link","OptimizedImage","Badge","WishlistButton","Button","ShoppingCart","CardContent","formatPrice","MapPin"],"mappings":"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"}