import{j as e}from"./ui-vendor-S1POobSh.js";import{u as C,r as V}from"./react-vendor-DrHQLvTy.js";import{t as S,b as l,B as n,x as j,g as T,c as h,d as x,i as y,j as N,K as u,q as z}from"./index-B_z83aGI.js";import{A as E}from"./arrow-left-Bup_IKS6.js";import"./chart-vendor-Bfyd95vO.js";import"./supabase-vendor-C-7U-qZP.js";import"./form-vendor-CeA2iSy3.js";const L=()=>{const o=C(),{state:f,removeItem:v,updateQuantity:g,clearCart:I,getItemKey:m}=S(),{items:r,totalItems:p,totalPrice:i}=f;V.useEffect(()=>{l.trackEcommerce("view_cart",{currency:"VND",value:i,items:r.map(s=>({item_id:s.product.id.toString(),item_name:s.product.name,item_category:s.product.category,item_brand:s.product.brand,price:s.product.price,quantity:s.quantity}))})},[r,i]);const b=(s,a,t)=>{if(a<t){const c=r.find(d=>m(d.product.id,d.selectedVariant)===s);c&&l.track("cart_item_quantity_increased",{item_id:c.product.id.toString(),item_name:c.product.name,old_quantity:a,new_quantity:a+1,price:c.product.price}),g(s,a+1)}},_=(s,a)=>{if(a>1){const t=r.find(c=>m(c.product.id,c.selectedVariant)===s);t&&l.track("cart_item_quantity_decreased",{item_id:t.product.id.toString(),item_name:t.product.name,old_quantity:a,new_quantity:a-1,price:t.product.price}),g(s,a-1)}},k=s=>{const a=r.find(t=>m(t.product.id,t.selectedVariant)===s);a&&l.trackEcommerce("remove_from_cart",{currency:"VND",value:a.product.price*a.quantity,items:[{item_id:a.product.id.toString(),item_name:a.product.name,item_category:a.product.category,item_brand:a.product.brand,price:a.product.price,quantity:a.quantity}]}),v(s)},w=()=>{l.trackEcommerce("begin_checkout",{currency:"VND",value:i,items:r.map(s=>({item_id:s.product.id.toString(),item_name:s.product.name,item_category:s.product.category,item_brand:s.product.brand,price:s.product.price,quantity:s.quantity}))}),o("/checkout")},q=()=>{o(-1)};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(n,{variant:"ghost",size:"sm",onClick:q,className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4"}),"Quay lại"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-6 w-6"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Giỏ hàng"}),p>0&&e.jsxs(T,{variant:"secondary",children:[p," sản phẩm"]})]})]})})}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:r.length===0?e.jsx(h,{className:"text-center py-12",children:e.jsxs(x,{children:[e.jsx(j,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Giỏ hàng trống"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Hãy thêm sản phẩm vào giỏ hàng để tiếp tục mua sắm"}),e.jsx(n,{onClick:()=>o("/"),className:"bg-orange-500 hover:bg-orange-600",children:"Tiếp tục mua sắm"})]})}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2 space-y-4",children:e.jsxs(h,{children:[e.jsx(y,{children:e.jsx(N,{children:"Sản phẩm trong giỏ hàng"})}),e.jsx(x,{className:"space-y-4",children:r.map(s=>{var t,c;const a=m(s.product.id,s.selectedVariant);return e.jsxs("div",{className:"flex gap-4 p-4 border rounded-lg",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-lg flex-shrink-0 overflow-hidden",children:e.jsx("img",{src:((t=s.product.images)==null?void 0:t[0])||"/placeholder.svg",alt:s.product.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-sm mb-1",children:s.product.name}),s.selectedVariant&&e.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:["Phân loại: ",s.selectedVariant.color," - ",s.selectedVariant.size]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>_(a,s.quantity),disabled:s.quantity<=1,className:"h-8 w-8 p-0",children:"-"}),e.jsx("span",{className:"w-8 text-center text-sm",children:s.quantity}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>{var d;return b(a,s.quantity,((d=s.selectedVariant)==null?void 0:d.stock)||s.product.stock)},disabled:s.quantity>=(((c=s.selectedVariant)==null?void 0:c.stock)||s.product.stock),className:"h-8 w-8 p-0",children:"+"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-orange-600",children:u(s.product.price*s.quantity)}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>k(a),className:"text-red-500 hover:text-red-700 p-0 h-auto",children:"Xóa"})]})]})]})]},a)})})]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs(h,{children:[e.jsx(y,{children:e.jsx(N,{children:"Tóm tắt đơn hàng"})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Tạm tính (",p," sản phẩm)"]}),e.jsx("span",{children:u(i)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Phí vận chuyển"}),e.jsx("span",{className:"text-green-600",children:"Miễn phí"})]}),e.jsx(z,{}),e.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[e.jsx("span",{children:"Tổng cộng"}),e.jsx("span",{className:"text-orange-600",children:u(i)})]}),e.jsx(n,{onClick:w,className:"w-full bg-orange-500 hover:bg-orange-600",size:"lg",children:"Thanh toán"}),e.jsx(n,{variant:"outline",onClick:()=>o("/"),className:"w-full",children:"Tiếp tục mua sắm"})]})]})})]})})]})};export{L as default};
//# sourceMappingURL=Cart-B9wzJ2Ra.js.map
