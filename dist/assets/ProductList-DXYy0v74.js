import{j as e}from"./ui-vendor-S1POobSh.js";import{L,r as h}from"./react-vendor-DrHQLvTy.js";import{c as $,d as O,g as f,S as E,B as l,L as K}from"./index-B_z83aGI.js";import{S as A,a as D,b as q}from"./sheet-N8TNJy76.js";import{P as z,a as U}from"./ProductSort-BHI-R7fF.js";import{P as V}from"./ProductCard-DGlgknfq.js";import{n as c,O as X,W as Y}from"./WishlistButton-DcIgUw2y.js";import{M as _}from"./map-pin-Cx6R8BJE.js";import{s as M}from"./ProductSection-eNEMheFC.js";import{S as G}from"./SEOHead-CFXTPp5x.js";import{F as H}from"./filter-CDTGhXC7.js";import{G as W,L as Q}from"./list-CSrzmTAL.js";import{L as J}from"./loader-circle-C6mRpfx8.js";import"./chart-vendor-Bfyd95vO.js";import"./supabase-vendor-C-7U-qZP.js";import"./form-vendor-CeA2iSy3.js";import"./checkbox-B751KjRM.js";import"./slider-Cq0KOhSO.js";import"./collapsible-CsGVlbxX.js";import"./chevron-up-DCfO1O8C.js";import"./chevron-down-B_2yl-Ju.js";import"./select-gZt-o9w_.js";import"./dollar-sign-DXLWm596.js";import"./chevron-left-CR6IMP4N.js";class Z{addToCart(n,o=1,d,j){try{c.success(`Đã thêm ${n.name} vào giỏ hàng`)}catch(x){console.error("Lỗi khi thêm vào giỏ hàng:",x),c.error("Có lỗi xảy ra khi thêm vào giỏ hàng")}}removeFromCart(n){try{c.success("Đã xóa sản phẩm khỏi giỏ hàng")}catch(o){console.error("Lỗi khi xóa khỏi giỏ hàng:",o),c.error("Có lỗi xảy ra khi xóa khỏi giỏ hàng")}}updateQuantity(n,o){try{c.success("Đã cập nhật số lượng sản phẩm")}catch(d){console.error("Lỗi khi cập nhật số lượng:",d),c.error("Có lỗi xảy ra khi cập nhật số lượng")}}getCartItems(){try{return[]}catch(n){return console.error("Lỗi khi lấy danh sách giỏ hàng:",n),[]}}clearCart(){try{c.success("Đã xóa toàn bộ giỏ hàng")}catch(n){console.error("Lỗi khi xóa giỏ hàng:",n),c.error("Có lỗi xảy ra khi xóa giỏ hàng")}}getCartTotal(){try{return 0}catch(n){return console.error("Lỗi khi tính tổng giỏ hàng:",n),0}}getCartItemCount(){try{return 0}catch(n){return console.error("Lỗi khi đếm sản phẩm:",n),0}}}const ee=new Z,T=s=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),se=s=>s>=1e3?`${(s/1e3).toFixed(1)}k`:s.toString(),te=({product:s,onClick:n,showDescription:o=!0,showAddToCart:d=!0,className:j=""})=>{const x=()=>{n==null||n(s)},u=r=>{r.preventDefault(),r.stopPropagation();try{ee.addItem({id:s.id,name:s.name,price:s.price,imageUrl:s.imageUrl,quantity:1}),c.success("Đã thêm sản phẩm vào giỏ hàng!")}catch{c.error("Có lỗi xảy ra khi thêm sản phẩm vào giỏ hàng")}},y=s.originalPrice?Math.round((s.originalPrice-s.price)/s.originalPrice*100):0;return e.jsx($,{className:`hover:shadow-md transition-shadow duration-200 ${j}`,children:e.jsx(O,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx(L,{to:`/product/${s.id}`,onClick:x,children:e.jsx(X,{src:s.imageUrl,alt:s.name,className:"w-32 h-32 object-cover rounded-lg",loading:"lazy"})}),y>0&&e.jsxs(f,{variant:"destructive",className:"absolute top-2 left-2 text-xs font-bold",children:["-",y,"%"]}),s.isFeatured&&e.jsx(f,{variant:"secondary",className:"absolute top-2 right-2 text-xs bg-yellow-500 text-white",children:"Nổi bật"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx(L,{to:`/product/${s.id}`,onClick:x,className:"flex-1 min-w-0",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 hover:text-blue-600 transition-colors line-clamp-2",children:s.name})}),e.jsx(Y,{product:s,size:"sm",variant:"ghost",iconOnly:!0,className:"ml-2 flex-shrink-0"})]}),o&&s.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((r,g)=>e.jsx(E,{className:`w-4 h-4 ${g<Math.floor(s.rating)?"text-yellow-400 fill-current":"text-gray-300"}`},g))}),e.jsxs("span",{className:"text-sm text-gray-600",children:["(",s.rating.toFixed(1),")"]})]}),s.soldCount&&e.jsxs("span",{className:"text-sm text-gray-500",children:["Đã bán ",se(s.soldCount)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl font-bold text-red-600",children:T(s.price)}),s.originalPrice&&s.originalPrice>s.price&&e.jsx("span",{className:"text-sm text-gray-500 line-through",children:T(s.originalPrice)})]}),d&&e.jsx(l,{onClick:u,size:"sm",className:"bg-orange-500 hover:bg-orange-600 text-white",children:"Thêm vào giỏ"})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[s.location&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[e.jsx(_,{className:"w-3 h-3"}),e.jsx("span",{children:s.location})]}),s.isFreeShipping&&e.jsx(f,{variant:"outline",className:"text-xs text-green-600 border-green-600",children:"Miễn phí vận chuyển"})]})]})]})})})},Pe=()=>{const[s,n]=h.useState([]),[o,d]=h.useState([]),[j,x]=h.useState(!0),[u,y]=h.useState("grid"),[r,g]=h.useState({priceRange:[0,1e7],categories:[],brands:[],rating:0,freeShipping:!1,inStock:!1,location:[]}),[N,I]=h.useState("relevance"),[p,S]=h.useState(1),v=24;h.useEffect(()=>{(async()=>{x(!0),await new Promise(a=>setTimeout(a,1e3));const i=[...M,...M.map(a=>({...a,id:a.id+"_dup",name:a.name+" (Phiên bản 2)"}))];n(i),d(i),x(!1)})()},[]),h.useEffect(()=>{let t=[...s];switch(t=t.filter(i=>i.price>=r.priceRange[0]&&i.price<=r.priceRange[1]),r.categories.length>0&&(t=t.filter(i=>r.categories.includes(i.category||""))),r.rating>0&&(t=t.filter(i=>i.rating>=r.rating)),r.freeShipping&&(t=t.filter(i=>i.freeShipping)),r.discount&&(t=t.filter(i=>i.discount&&i.discount>0)),N){case"price-low":t.sort((i,a)=>i.price-a.price);break;case"price-high":t.sort((i,a)=>a.price-i.price);break;case"rating":t.sort((i,a)=>a.rating-i.rating);break;case"newest":t.sort((i,a)=>a.id.localeCompare(i.id));break;case"best-selling":t.sort((i,a)=>a.sold-i.sold);break}d(t),S(1)},[s,r,N]);const P=t=>{g(t)},B=t=>{I(t)},b=()=>{g({priceRange:[0,1e7],categories:[],brands:[],rating:0,freeShipping:!1,inStock:!1,discount:!1})},m=()=>{let t=0;return r.categories.length>0&&t++,r.brands.length>0&&t++,r.rating>0&&t++,r.freeShipping&&t++,r.inStock&&t++,r.discount&&t++,(r.priceRange[0]>0||r.priceRange[1]<1e7)&&t++,t},w=Math.ceil(o.length/v),F=(p-1)*v,R=F+v,C=o.slice(F,R),k=t=>{S(t),window.scrollTo({top:0,behavior:"smooth"})};return e.jsxs(K,{children:[e.jsx(G,{title:"Tất cả sản phẩm - Yapee",description:"Khám phá hàng triệu sản phẩm chất lượng với giá tốt nhất tại Yapee. Mua sắm trực tuyến an toàn, giao hàng nhanh chóng.",keywords:"sản phẩm, mua sắm, thương mại điện tử, Yapee"}),e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Tất cả sản phẩm"}),e.jsx("p",{className:"text-gray-600",children:"Khám phá hàng triệu sản phẩm chất lượng"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"hidden lg:block w-64 flex-shrink-0",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 sticky top-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Bộ lọc"}),m()>0&&e.jsx(f,{variant:"secondary",className:"text-xs",children:m()})]}),e.jsx(z,{filters:r,onFiltersChange:P}),m()>0&&e.jsx(l,{onClick:b,variant:"outline",size:"sm",className:"w-full mt-4",children:"Xóa bộ lọc"})]})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 bg-white rounded-lg shadow-sm p-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(A,{children:[e.jsx(D,{asChild:!0,children:e.jsxs(l,{variant:"outline",size:"sm",className:"lg:hidden",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Bộ lọc",m()>0&&e.jsx(f,{variant:"secondary",className:"ml-2 text-xs",children:m()})]})}),e.jsx(q,{side:"left",className:"w-80",children:e.jsxs("div",{className:"py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Bộ lọc"}),m()>0&&e.jsx(f,{variant:"secondary",className:"text-xs",children:m()})]}),e.jsx(z,{filters:r,onFiltersChange:P}),m()>0&&e.jsx(l,{onClick:b,variant:"outline",size:"sm",className:"w-full mt-4",children:"Xóa bộ lọc"})]})})]}),e.jsx("span",{className:"text-sm text-gray-600",children:j?"Đang tải...":`${o.length} sản phẩm`})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(U,{sortOption:N,onSortChange:B}),e.jsxs("div",{className:"flex items-center border rounded-lg",children:[e.jsx(l,{variant:u==="grid"?"default":"ghost",size:"sm",onClick:()=>y("grid"),className:"rounded-r-none",children:e.jsx(W,{className:"h-4 w-4"})}),e.jsx(l,{variant:u==="list"?"default":"ghost",size:"sm",onClick:()=>y("list"),className:"rounded-l-none",children:e.jsx(Q,{className:"h-4 w-4"})})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:j?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(J,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Đang tải sản phẩm..."})]}):e.jsx(e.Fragment,{children:C.length>0?e.jsxs(e.Fragment,{children:[u==="grid"?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:C.map(t=>e.jsx(V,{product:t},t.id))}):e.jsx("div",{className:"space-y-4",children:C.map(t=>e.jsx(te,{product:t},t.id))}),w>1&&e.jsxs("div",{className:"flex items-center justify-center mt-8 space-x-2",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>k(p-1),disabled:p===1,children:"Trước"}),Array.from({length:Math.min(5,w)},(t,i)=>{const a=i+1;return e.jsx(l,{variant:p===a?"default":"outline",size:"sm",onClick:()=>k(a),children:a},a)}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>k(p+1),disabled:p===w,children:"Sau"})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Không tìm thấy sản phẩm nào"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Hãy thử thay đổi bộ lọc để xem thêm sản phẩm."}),m()>0&&e.jsx(l,{onClick:b,variant:"outline",children:"Xóa bộ lọc"})]})})})]})]})]})})]})};export{Pe as default};
//# sourceMappingURL=ProductList-DXYy0v74.js.map
