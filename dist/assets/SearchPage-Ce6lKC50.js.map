{"version":3,"file":"SearchPage-Ce6lKC50.js","sources":["../../node_modules/lucide-react/dist/esm/icons/sliders-horizontal.js","../../src/components/search/SearchBar.tsx","../../src/components/search/SearchFilters.tsx","../../src/components/search/SearchResultCard.tsx","../../src/components/search/SearchResultsList.tsx","../../src/pages/SearchPage.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst SlidersHorizontal = createLucideIcon(\"SlidersHorizontal\", [\n  [\"line\", { x1: \"21\", x2: \"14\", y1: \"4\", y2: \"4\", key: \"obuewd\" }],\n  [\"line\", { x1: \"10\", x2: \"3\", y1: \"4\", y2: \"4\", key: \"1q6298\" }],\n  [\"line\", { x1: \"21\", x2: \"12\", y1: \"12\", y2: \"12\", key: \"1iu8h1\" }],\n  [\"line\", { x1: \"8\", x2: \"3\", y1: \"12\", y2: \"12\", key: \"ntss68\" }],\n  [\"line\", { x1: \"21\", x2: \"16\", y1: \"20\", y2: \"20\", key: \"14d8ph\" }],\n  [\"line\", { x1: \"12\", x2: \"3\", y1: \"20\", y2: \"20\", key: \"m0wm8r\" }],\n  [\"line\", { x1: \"14\", x2: \"14\", y1: \"2\", y2: \"6\", key: \"14e1ph\" }],\n  [\"line\", { x1: \"8\", x2: \"8\", y1: \"10\", y2: \"14\", key: \"1i6ji0\" }],\n  [\"line\", { x1: \"16\", x2: \"16\", y1: \"18\", y2: \"22\", key: \"1lctlv\" }]\n]);\n\nexport { SlidersHorizontal as default };\n//# sourceMappingURL=sliders-horizontal.js.map\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Search, X, Clock, TrendingUp, Filter } from 'lucide-react';\nimport { useDebounce } from '../../hooks/useDebounce';\nimport { searchService, SearchSuggestion } from '../../services/searchService';\nimport { cn } from '../../lib/utils';\nimport { Button } from '../ui/button';\nimport { Input } from '../ui/input';\nimport { analytics } from '../../lib/analytics';\n\ninterface SearchBarProps {\n  onSearch?: (query: string) => void;\n  onFilterClick?: () => void;\n  placeholder?: string;\n  className?: string;\n  showFilters?: boolean;\n  autoFocus?: boolean;\n}\n\nexport function SearchBar({\n  onSearch,\n  onFilterClick,\n  placeholder = 'Tìm kiếm sản phẩm...',\n  className,\n  showFilters = true,\n  autoFocus = false\n}: SearchBarProps) {\n  const [query, setQuery] = useState('');\n  const [isOpen, setIsOpen] = useState(false);\n  const [suggestions, setSuggestions] = useState<SearchSuggestion[]>([]);\n  const [searchHistory, setSearchHistory] = useState<string[]>([]);\n  const [trendingSearches, setTrendingSearches] = useState<string[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  \n  const inputRef = useRef<HTMLInputElement>(null);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n  const abortControllerRef = useRef<AbortController | null>(null);\n  \n  const debouncedQuery = useDebounce(query, 300);\n  \n  // Load initial data\n  useEffect(() => {\n    setSearchHistory(searchService.getRecentSearches());\n    loadTrendingSearches();\n  }, []);\n  \n  // Load trending searches\n  const loadTrendingSearches = async () => {\n    try {\n      const trending = await searchService.getTrendingSearches();\n      setTrendingSearches(trending);\n    } catch (error) {\n      console.error('Failed to load trending searches:', error);\n    }\n  };\n  \n  // Handle autocomplete\n  useEffect(() => {\n    if (debouncedQuery.length >= 2) {\n      // Cancel previous request\n      if (abortControllerRef.current) {\n        abortControllerRef.current.abort();\n      }\n      \n      abortControllerRef.current = new AbortController();\n      setIsLoading(true);\n      \n      searchService.getSuggestions(debouncedQuery, abortControllerRef.current.signal)\n        .then(setSuggestions)\n        .catch((error) => {\n          if (error.name !== 'AbortError') {\n            console.error('Autocomplete error:', error);\n          }\n        })\n        .finally(() => {\n          setIsLoading(false);\n        });\n    } else {\n      setSuggestions([]);\n    }\n  }, [debouncedQuery]);\n  \n  // Handle search\n  const handleSearch = useCallback((searchQuery: string) => {\n    if (searchQuery.trim()) {\n      // Track search analytics\n      analytics.track('search_performed', {\n        query: searchQuery.trim(),\n        source: 'search_bar'\n      });\n      \n      onSearch?.(searchQuery.trim());\n      setQuery(searchQuery.trim());\n      setIsOpen(false);\n      \n      // Save to search history\n      searchService.saveSearchHistory(searchQuery.trim());\n      setSearchHistory(searchService.getRecentSearches());\n    }\n  }, [onSearch]);\n  \n  // Handle input change\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    setQuery(value);\n    setIsOpen(value.length > 0 || searchHistory.length > 0 || trendingSearches.length > 0);\n  };\n  \n  // Handle key press\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      handleSearch(query);\n    } else if (e.key === 'Escape') {\n      setIsOpen(false);\n      inputRef.current?.blur();\n    }\n  };\n  \n  // Handle suggestion click\n  const handleSuggestionClick = (suggestion: SearchSuggestion) => {\n    // Track suggestion click analytics\n    analytics.track('search_suggestion_clicked', {\n      suggestion: suggestion.text,\n      type: suggestion.type,\n      source: 'autocomplete'\n    });\n    \n    if (suggestion.type === 'product') {\n      // Navigate to product page (assuming suggestion.text contains product name)\n      // In a real app, you'd have product ID in the suggestion\n      handleSearch(suggestion.text);\n    } else {\n      // Search for the suggestion\n      handleSearch(suggestion.text);\n    }\n  };\n  \n  // Handle history item click\n  const handleHistoryClick = (historyItem: string) => {\n    // Track search history click analytics\n    analytics.track('search_history_clicked', {\n      query: historyItem,\n      source: 'search_history'\n    });\n    \n    handleSearch(historyItem);\n  };\n  \n  // Clear search\n  const clearSearch = () => {\n    setQuery('');\n    setSuggestions([]);\n    setIsOpen(false);\n    inputRef.current?.focus();\n  };\n  \n  // Clear search history\n  const clearHistory = () => {\n    searchService.clearSearchHistory();\n    setSearchHistory([]);\n  };\n  \n  // Handle click outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (\n        dropdownRef.current &&\n        !dropdownRef.current.contains(event.target as Node) &&\n        inputRef.current &&\n        !inputRef.current.contains(event.target as Node)\n      ) {\n        setIsOpen(false);\n      }\n    };\n    \n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n  \n  // Auto focus\n  useEffect(() => {\n    if (autoFocus && inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, [autoFocus]);\n  \n  // Cleanup abort controller\n  useEffect(() => {\n    return () => {\n      if (abortControllerRef.current) {\n        abortControllerRef.current.abort();\n      }\n    };\n  }, []);\n  \n  const showDropdown = isOpen && (\n    suggestions.length > 0 ||\n    (query.length === 0 && (searchHistory.length > 0 || trendingSearches.length > 0))\n  );\n  \n  return (\n    <div className={cn('relative w-full max-w-2xl', className)}>\n      <div className=\"relative\">\n        <div className=\"relative flex items-center\">\n          <div className=\"relative flex-1\">\n            <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground\" />\n            <Input\n              ref={inputRef}\n              type=\"text\"\n              placeholder={placeholder}\n              value={query}\n              onChange={handleInputChange}\n              onKeyDown={handleKeyPress}\n              onFocus={() => setIsOpen(true)}\n              className=\"pl-10 pr-10 h-12 text-base\"\n            />\n            {query && (\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={clearSearch}\n                className=\"absolute right-2 top-1/2 h-6 w-6 -translate-y-1/2 p-0 hover:bg-transparent\"\n              >\n                <X className=\"h-4 w-4\" />\n              </Button>\n            )}\n          </div>\n          \n          {showFilters && (\n            <Button\n              variant=\"outline\"\n              size=\"lg\"\n              onClick={onFilterClick}\n              className=\"ml-2 h-12 px-4\"\n            >\n              <Filter className=\"h-4 w-4 mr-2\" />\n              Lọc\n            </Button>\n          )}\n        </div>\n        \n        {/* Dropdown */}\n        {showDropdown && (\n          <div\n            ref={dropdownRef}\n            className=\"absolute top-full left-0 right-0 z-50 mt-1 bg-background border rounded-lg shadow-lg max-h-96 overflow-y-auto\"\n          >\n            {/* Loading */}\n            {isLoading && (\n              <div className=\"p-4 text-center text-muted-foreground\">\n                Đang tìm kiếm...\n              </div>\n            )}\n            \n            {/* Suggestions */}\n            {suggestions.length > 0 && (\n              <div className=\"p-2\">\n                <div className=\"text-xs font-medium text-muted-foreground px-2 py-1 mb-1\">\n                  Gợi ý tìm kiếm\n                </div>\n                {suggestions.map((suggestion, index) => (\n                  <button\n                    key={`${suggestion.type}-${index}`}\n                    onClick={() => handleSuggestionClick(suggestion)}\n                    className=\"w-full flex items-center gap-3 px-3 py-2 text-left hover:bg-muted rounded-md transition-colors\"\n                  >\n                    <Search className=\"h-4 w-4 text-muted-foreground flex-shrink-0\" />\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"font-medium truncate\">{suggestion.text}</div>\n                      {suggestion.count && (\n                        <div className=\"text-xs text-muted-foreground\">\n                          {suggestion.count} sản phẩm\n                        </div>\n                      )}\n                      {suggestion.price && (\n                        <div className=\"text-xs text-muted-foreground\">\n                          {suggestion.price.toLocaleString('vi-VN')} ₫\n                        </div>\n                      )}\n                    </div>\n                    <div className=\"text-xs text-muted-foreground capitalize\">\n                      {suggestion.type === 'product' && 'Sản phẩm'}\n                      {suggestion.type === 'category' && 'Danh mục'}\n                      {suggestion.type === 'brand' && 'Thương hiệu'}\n                    </div>\n                  </button>\n                ))}\n              </div>\n            )}\n            \n            {/* Search History */}\n            {query.length === 0 && searchHistory.length > 0 && (\n              <div className=\"p-2\">\n                <div className=\"flex items-center justify-between px-2 py-1 mb-1\">\n                  <div className=\"text-xs font-medium text-muted-foreground flex items-center gap-1\">\n                    <Clock className=\"h-3 w-3\" />\n                    Tìm kiếm gần đây\n                  </div>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={clearHistory}\n                    className=\"h-auto p-0 text-xs text-muted-foreground hover:text-foreground\"\n                  >\n                    Xóa tất cả\n                  </Button>\n                </div>\n                {searchHistory.slice(0, 5).map((item, index) => (\n                  <button\n                    key={`history-${index}`}\n                    onClick={() => handleHistoryClick(item)}\n                    className=\"w-full flex items-center gap-3 px-3 py-2 text-left hover:bg-muted rounded-md transition-colors\"\n                  >\n                    <Clock className=\"h-4 w-4 text-muted-foreground flex-shrink-0\" />\n                    <span className=\"flex-1 truncate\">{item}</span>\n                  </button>\n                ))}\n              </div>\n            )}\n            \n            {/* Trending Searches */}\n            {query.length === 0 && trendingSearches.length > 0 && (\n              <div className=\"p-2\">\n                <div className=\"text-xs font-medium text-muted-foreground px-2 py-1 mb-1 flex items-center gap-1\">\n                  <TrendingUp className=\"h-3 w-3\" />\n                  Tìm kiếm phổ biến\n                </div>\n                {trendingSearches.slice(0, 5).map((item, index) => (\n                  <button\n                    key={`trending-${index}`}\n                    onClick={() => handleHistoryClick(item)}\n                    className=\"w-full flex items-center gap-3 px-3 py-2 text-left hover:bg-muted rounded-md transition-colors\"\n                  >\n                    <TrendingUp className=\"h-4 w-4 text-muted-foreground flex-shrink-0\" />\n                    <span className=\"flex-1 truncate\">{item}</span>\n                  </button>\n                ))}\n              </div>\n            )}\n            \n            {/* No results */}\n            {suggestions.length === 0 && query.length >= 2 && !isLoading && (\n              <div className=\"p-4 text-center text-muted-foreground\">\n                Không tìm thấy kết quả cho \"{query}\"\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default SearchBar;","import React, { useState, useEffect } from 'react';\nimport { X, ChevronDown, ChevronUp, Star, MapPin, Truck } from 'lucide-react';\nimport { SearchQuery, SearchFilters as ISearchFilters, FilterOption, PriceRange } from '../../services/searchService';\nimport { cn } from '../../lib/utils';\nimport { Button } from '../ui/button';\nimport { Checkbox } from '../ui/checkbox';\nimport { Label } from '../ui/label';\nimport { Slider } from '../ui/slider';\nimport { Badge } from '../ui/badge';\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from '../ui/collapsible';\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n  SheetTrigger,\n} from '../ui/sheet';\n\ninterface SearchFiltersProps {\n  filters: ISearchFilters;\n  currentQuery: SearchQuery;\n  onFiltersChange: (query: SearchQuery) => void;\n  onClearFilters: () => void;\n  className?: string;\n  isMobile?: boolean;\n}\n\ninterface FilterSectionProps {\n  title: string;\n  children: React.ReactNode;\n  defaultOpen?: boolean;\n  className?: string;\n}\n\nfunction FilterSection({ title, children, defaultOpen = true, className }: FilterSectionProps) {\n  const [isOpen, setIsOpen] = useState(defaultOpen);\n  \n  return (\n    <Collapsible open={isOpen} onOpenChange={setIsOpen} className={className}>\n      <CollapsibleTrigger asChild>\n        <Button\n          variant=\"ghost\"\n          className=\"w-full justify-between p-0 h-auto font-medium text-left\"\n        >\n          {title}\n          {isOpen ? <ChevronUp className=\"h-4 w-4\" /> : <ChevronDown className=\"h-4 w-4\" />}\n        </Button>\n      </CollapsibleTrigger>\n      <CollapsibleContent className=\"mt-3\">\n        {children}\n      </CollapsibleContent>\n    </Collapsible>\n  );\n}\n\nfunction SearchFiltersContent({\n  filters,\n  currentQuery,\n  onFiltersChange,\n  onClearFilters,\n  className\n}: SearchFiltersProps) {\n  const [localQuery, setLocalQuery] = useState<SearchQuery>(currentQuery);\n  const [priceRange, setPriceRange] = useState<[number, number]>([0, 10000000]);\n  \n  // Update local state when currentQuery changes\n  useEffect(() => {\n    setLocalQuery(currentQuery);\n    if (currentQuery.minPrice !== undefined && currentQuery.maxPrice !== undefined) {\n      setPriceRange([currentQuery.minPrice, currentQuery.maxPrice]);\n    }\n  }, [currentQuery]);\n  \n  // Apply filters\n  const applyFilters = () => {\n    onFiltersChange({\n      ...localQuery,\n      minPrice: priceRange[0] > 0 ? priceRange[0] : undefined,\n      maxPrice: priceRange[1] < 10000000 ? priceRange[1] : undefined\n    });\n  };\n  \n  // Handle category change\n  const handleCategoryChange = (category: string, checked: boolean) => {\n    setLocalQuery(prev => ({\n      ...prev,\n      category: checked ? category : undefined\n    }));\n  };\n  \n  // Handle brand change (multi-select)\n  const handleBrandChange = (brand: string, checked: boolean) => {\n    setLocalQuery(prev => {\n      const currentBrands = Array.isArray(prev.brand) ? prev.brand : prev.brand ? [prev.brand] : [];\n      \n      if (checked) {\n        return {\n          ...prev,\n          brand: [...currentBrands, brand]\n        };\n      } else {\n        const newBrands = currentBrands.filter(b => b !== brand);\n        return {\n          ...prev,\n          brand: newBrands.length > 0 ? newBrands : undefined\n        };\n      }\n    });\n  };\n  \n  // Handle rating change\n  const handleRatingChange = (rating: number, checked: boolean) => {\n    setLocalQuery(prev => ({\n      ...prev,\n      minRating: checked ? rating : undefined\n    }));\n  };\n  \n  // Handle location change\n  const handleLocationChange = (location: string, checked: boolean) => {\n    setLocalQuery(prev => ({\n      ...prev,\n      location: checked ? location : undefined\n    }));\n  };\n  \n  // Handle shipping option change\n  const handleShippingChange = (option: string, checked: boolean) => {\n    setLocalQuery(prev => {\n      const currentShipping = prev.shippingOptions || [];\n      \n      if (checked) {\n        return {\n          ...prev,\n          shippingOptions: [...currentShipping, option]\n        };\n      } else {\n        const newShipping = currentShipping.filter(s => s !== option);\n        return {\n          ...prev,\n          shippingOptions: newShipping.length > 0 ? newShipping : undefined\n        };\n      }\n    });\n  };\n  \n  // Get active filter count\n  const getActiveFilterCount = () => {\n    let count = 0;\n    if (localQuery.category) count++;\n    if (localQuery.brand) {\n      count += Array.isArray(localQuery.brand) ? localQuery.brand.length : 1;\n    }\n    if (localQuery.minRating) count++;\n    if (localQuery.location) count++;\n    if (localQuery.shippingOptions?.length) count += localQuery.shippingOptions.length;\n    if (priceRange[0] > 0 || priceRange[1] < 10000000) count++;\n    return count;\n  };\n  \n  // Clear all filters\n  const clearAllFilters = () => {\n    setLocalQuery({\n      query: localQuery.query,\n      sortBy: localQuery.sortBy\n    });\n    setPriceRange([0, 10000000]);\n    onClearFilters();\n  };\n  \n  // Handle price range change\n  const handlePriceRangeChange = (range: PriceRange) => {\n    setPriceRange([range.min, range.max === Infinity ? 10000000 : range.max]);\n    setLocalQuery(prev => ({\n      ...prev,\n      minPrice: range.min,\n      maxPrice: range.max === Infinity ? undefined : range.max\n    }));\n  };\n  \n  // Handle availability change\n  const handleAvailabilityChange = (type: string, checked: boolean) => {\n    if (type === 'in_stock') {\n      setLocalQuery(prev => ({\n        ...prev,\n        inStock: checked ? true : undefined\n      }));\n    }\n  };\n  \n  // Handle tag change\n  const handleTagChange = (tag: string, checked: boolean) => {\n    setLocalQuery(prev => {\n      const currentTags = prev.tags || [];\n      if (checked) {\n        return {\n          ...prev,\n          tags: [...currentTags, tag]\n        };\n      } else {\n        return {\n          ...prev,\n          tags: currentTags.filter(t => t !== tag)\n        };\n      }\n    });\n  };\n  \n  // Format price\n  const formatPrice = (price: number) => {\n    return new Intl.NumberFormat('vi-VN', {\n      style: 'currency',\n      currency: 'VND'\n    }).format(price);\n  };\n  \n  // Count active filters\n  const activeFiltersCount = [\n    localQuery.category,\n    localQuery.brand,\n    localQuery.rating,\n    localQuery.minPrice,\n    localQuery.maxPrice,\n    localQuery.inStock,\n    ...(localQuery.tags || [])\n  ].filter(Boolean).length;\n  \n  return (\n    <div className={cn('space-y-6', className)}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"font-semibold text-lg\">Bộ lọc</h3>\n        <div className=\"flex items-center gap-2\">\n          {activeFiltersCount > 0 && (\n            <Badge variant=\"secondary\">\n              {activeFiltersCount} bộ lọc\n            </Badge>\n          )}\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={onClearFilters}\n            className=\"text-muted-foreground hover:text-foreground\"\n          >\n            Xóa tất cả\n          </Button>\n        </div>\n      </div>\n      \n      {/* Categories */}\n      {filters.categories.length > 0 && (\n        <FilterSection title=\"Danh mục\">\n          <div className=\"space-y-2\">\n            {filters.categories.slice(0, 8).map((category) => (\n              <div key={category.value} className=\"flex items-center space-x-2\">\n                <Checkbox\n                  id={`category-${category.value}`}\n                  checked={localQuery.category === category.value}\n                  onCheckedChange={(checked) => \n                    handleCategoryChange(category.value, checked as boolean)\n                  }\n                />\n                <Label\n                  htmlFor={`category-${category.value}`}\n                  className=\"flex-1 text-sm font-normal cursor-pointer\"\n                >\n                  {category.label}\n                  {category.count && (\n                    <span className=\"text-muted-foreground ml-1\">({category.count})</span>\n                  )}\n                </Label>\n              </div>\n            ))}\n          </div>\n        </FilterSection>\n      )}\n      \n      {/* Price Range */}\n      <FilterSection title=\"Khoảng giá\">\n        <div className=\"space-y-4\">\n          {/* Predefined ranges */}\n          {filters.priceRanges.length > 0 && (\n            <div className=\"space-y-2\">\n              {filters.priceRanges.map((range, index) => (\n                <button\n                  key={index}\n                  onClick={() => handlePriceRangeChange(range)}\n                  className={cn(\n                    'w-full text-left px-3 py-2 rounded-md text-sm transition-colors',\n                    range.selected\n                      ? 'bg-primary text-primary-foreground'\n                      : 'hover:bg-muted'\n                  )}\n                >\n                  <div className=\"flex justify-between items-center\">\n                    <span>{range.label}</span>\n                    {range.count && (\n                      <span className=\"text-xs opacity-70\">({range.count})</span>\n                    )}\n                  </div>\n                </button>\n              ))}\n            </div>\n          )}\n          \n          {/* Custom range slider */}\n          <div className=\"space-y-3\">\n            <div className=\"text-sm font-medium\">Tùy chỉnh</div>\n            <Slider\n              value={priceRange}\n              onValueChange={setPriceRange}\n              max={10000000}\n              min={0}\n              step={100000}\n              className=\"w-full\"\n            />\n            <div className=\"flex justify-between text-xs text-muted-foreground\">\n              <span>{formatPrice(priceRange[0])}</span>\n              <span>{formatPrice(priceRange[1])}</span>\n            </div>\n          </div>\n        </div>\n      </FilterSection>\n      \n      {/* Brands */}\n      {filters.brands.length > 0 && (\n        <FilterSection title=\"Thương hiệu\">\n          <div className=\"space-y-2\">\n            {(() => {\n               const currentBrands = Array.isArray(localQuery.brand) ? localQuery.brand : localQuery.brand ? [localQuery.brand] : [];\n               \n               return (\n                 <>\n                   {filters.brands.slice(0, 8).map((brand) => {\n                     const isChecked = currentBrands.includes(brand.value);\n                     \n                     return (\n                       <div key={brand.value} className=\"flex items-center space-x-2\">\n                         <Checkbox\n                           id={`brand-${brand.value}`}\n                           checked={isChecked}\n                           onCheckedChange={(checked) => \n                             handleBrandChange(brand.value, checked as boolean)\n                           }\n                         />\n                         <Label\n                           htmlFor={`brand-${brand.value}`}\n                           className=\"flex-1 text-sm font-normal cursor-pointer\"\n                         >\n                           {brand.label}\n                           {brand.count && (\n                             <span className=\"text-muted-foreground ml-1\">({brand.count})</span>\n                           )}\n                         </Label>\n                       </div>\n                     );\n                   })}\n                   {currentBrands.length > 0 && (\n                     <div className=\"pt-2\">\n                       <div className=\"flex flex-wrap gap-1\">\n                         {currentBrands.map((brand) => (\n                           <Badge key={brand} variant=\"secondary\" className=\"text-xs\">\n                             {brand}\n                             <button\n                               onClick={() => handleBrandChange(brand, false)}\n                               className=\"ml-1 hover:text-destructive\"\n                             >\n                               <X className=\"h-3 w-3\" />\n                             </button>\n                           </Badge>\n                         ))}\n                       </div>\n                     </div>\n                   )}\n                 </>\n               );\n             })()}\n          </div>\n        </FilterSection>\n      )}\n      \n      {/* Rating */}\n      {filters.ratings.length > 0 && (\n        <FilterSection title=\"Đánh giá\">\n          <div className=\"space-y-2\">\n            {filters.ratings.map((rating) => (\n              <div key={rating} className=\"flex items-center space-x-2\">\n                <Checkbox\n                  id={`rating-${rating}`}\n                  checked={localQuery.rating === rating}\n                  onCheckedChange={(checked) => \n                    handleRatingChange(rating, checked as boolean)\n                  }\n                />\n                <Label\n                  htmlFor={`rating-${rating}`}\n                  className=\"flex items-center space-x-1 text-sm font-normal cursor-pointer\"\n                >\n                  <div className=\"flex items-center\">\n                    {Array.from({ length: 5 }, (_, i) => (\n                      <Star\n                        key={i}\n                        className={cn(\n                          'h-3 w-3',\n                          i < rating\n                            ? 'fill-yellow-400 text-yellow-400'\n                            : 'text-gray-300'\n                        )}\n                      />\n                    ))}\n                  </div>\n                  <span>từ {rating} sao trở lên</span>\n                </Label>\n              </div>\n            ))}\n          </div>\n        </FilterSection>\n      )}\n      \n      {/* Availability */}\n      {filters.availability.length > 0 && (\n        <FilterSection title=\"Tình trạng\">\n          <div className=\"space-y-2\">\n            {filters.availability.map((option) => (\n              <div key={option.value} className=\"flex items-center space-x-2\">\n                <Checkbox\n                  id={`availability-${option.value}`}\n                  checked={\n                    (option.value === 'in_stock' && localQuery.inStock === true) ||\n                    (option.value === 'out_of_stock' && localQuery.inStock === false)\n                  }\n                  onCheckedChange={(checked) => \n                    handleAvailabilityChange(option.value, checked as boolean)\n                  }\n                />\n                <Label\n                  htmlFor={`availability-${option.value}`}\n                  className=\"flex-1 text-sm font-normal cursor-pointer\"\n                >\n                  <div className=\"flex items-center gap-2\">\n                    {option.value === 'in_stock' && <Truck className=\"h-3 w-3\" />}\n                    {option.label}\n                    {option.count && (\n                      <span className=\"text-muted-foreground\">({option.count})</span>\n                    )}\n                  </div>\n                </Label>\n              </div>\n            ))}\n          </div>\n        </FilterSection>\n      )}\n      \n      {/* Tags */}\n      {filters.tags.length > 0 && (\n        <FilterSection title=\"Thẻ\" defaultOpen={false}>\n          <div className=\"space-y-2\">\n            {filters.tags.slice(0, 10).map((tag) => (\n              <div key={tag.value} className=\"flex items-center space-x-2\">\n                <Checkbox\n                  id={`tag-${tag.value}`}\n                  checked={localQuery.tags?.includes(tag.value) || false}\n                  onCheckedChange={(checked) => \n                    handleTagChange(tag.value, checked as boolean)\n                  }\n                />\n                <Label\n                  htmlFor={`tag-${tag.value}`}\n                  className=\"flex-1 text-sm font-normal cursor-pointer\"\n                >\n                  {tag.label}\n                  {tag.count && (\n                    <span className=\"text-muted-foreground ml-1\">({tag.count})</span>\n                  )}\n                </Label>\n              </div>\n            ))}\n          </div>\n        </FilterSection>\n      )}\n      \n      {/* Location */}\n      {filters.locations && filters.locations.length > 0 && (\n        <FilterSection title=\"Khu vực\" defaultOpen={false}>\n          <div className=\"space-y-2\">\n            {filters.locations.slice(0, 8).map((location) => (\n              <div key={location.value} className=\"flex items-center space-x-2\">\n                <Checkbox\n                  id={`location-${location.value}`}\n                  checked={localQuery.location === location.value}\n                  onCheckedChange={(checked) => \n                    handleLocationChange(location.value, checked as boolean)\n                  }\n                />\n                <Label\n                  htmlFor={`location-${location.value}`}\n                  className=\"flex items-center space-x-1 text-sm font-normal cursor-pointer\"\n                >\n                  <MapPin className=\"h-3 w-3\" />\n                  <span>{location.label}</span>\n                  {location.count && (\n                    <span className=\"text-muted-foreground\">({location.count})</span>\n                  )}\n                </Label>\n              </div>\n            ))}\n          </div>\n        </FilterSection>\n      )}\n      \n      {/* Shipping Options */}\n      {filters.shippingOptions && filters.shippingOptions.length > 0 && (\n        <FilterSection title=\"Vận chuyển\" defaultOpen={false}>\n          <div className=\"space-y-2\">\n            {filters.shippingOptions.map((option) => (\n              <div key={option.value} className=\"flex items-center space-x-2\">\n                <Checkbox\n                  id={`shipping-${option.value}`}\n                  checked={localQuery.shipping?.includes(option.value) || false}\n                  onCheckedChange={(checked) => \n                    handleShippingChange(option.value, checked as boolean)\n                  }\n                />\n                <Label\n                  htmlFor={`shipping-${option.value}`}\n                  className=\"flex items-center space-x-1 text-sm font-normal cursor-pointer\"\n                >\n                  <Truck className=\"h-3 w-3\" />\n                  <span>{option.label}</span>\n                  {option.count && (\n                    <span className=\"text-muted-foreground\">({option.count})</span>\n                  )}\n                </Label>\n              </div>\n            ))}\n          </div>\n        </FilterSection>\n      )}\n      \n      {/* Apply Button */}\n      <div className=\"pt-4 border-t\">\n        <Button onClick={applyFilters} className=\"w-full\">\n          Áp dụng bộ lọc\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nexport function SearchFilters(props: SearchFiltersProps) {\n  if (props.isMobile) {\n    return (\n      <Sheet>\n        <SheetTrigger asChild>\n          <Button variant=\"outline\" size=\"sm\">\n            Bộ lọc\n          </Button>\n        </SheetTrigger>\n        <SheetContent side=\"left\" className=\"w-80 overflow-y-auto\">\n          <SheetHeader>\n            <SheetTitle>Bộ lọc tìm kiếm</SheetTitle>\n            <SheetDescription>\n              Sử dụng các bộ lọc để tìm sản phẩm phù hợp\n            </SheetDescription>\n          </SheetHeader>\n          <div className=\"mt-6\">\n            <SearchFiltersContent {...props} />\n          </div>\n        </SheetContent>\n      </Sheet>\n    );\n  }\n  \n  return (\n    <div className={cn('w-64 flex-shrink-0', props.className)}>\n      <div className=\"sticky top-4\">\n        <SearchFiltersContent {...props} />\n      </div>\n    </div>\n  );\n}\n\nexport default SearchFilters;","import React from 'react';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Heart, MapPin, Star, ShoppingCart, Zap } from 'lucide-react';\nimport { SearchResult } from '@/services/searchService';\nimport { cn, formatPrice } from '@/lib/utils';\n\ninterface SearchResultCardProps {\n  result: SearchResult;\n  onAddToCart?: (productId: string) => void;\n  onToggleWishlist?: (productId: string) => void;\n  onProductClick?: (productId: string) => void;\n  isWishlisted?: boolean;\n  showOptimizationInfo?: boolean;\n  viewMode?: 'grid' | 'list';\n  className?: string;\n}\n\nexport const SearchResultCard: React.FC<SearchResultCardProps> = ({\n  result,\n  onAddToCart,\n  onToggleWishlist,\n  onProductClick,\n  isWishlisted = false,\n  showOptimizationInfo = false,\n  viewMode = 'grid',\n  className\n}) => {\n  const handleCardClick = () => {\n    onProductClick?.(result.id);\n  };\n\n  const handleAddToCart = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    onAddToCart?.(result.id);\n  };\n\n  const handleToggleWishlist = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    onToggleWishlist?.(result.id);\n  };\n\n  const renderOptimizationBadge = () => {\n    if (!showOptimizationInfo || !result.optimizationMetadata) return null;\n\n    const { optimizationMetadata } = result;\n    const totalScore = optimizationMetadata.baseScore + \n                      optimizationMetadata.personalizedScore + \n                      optimizationMetadata.trendingScore + \n                      optimizationMetadata.locationScore + \n                      optimizationMetadata.seasonalScore + \n                      optimizationMetadata.popularityScore;\n\n    if (totalScore > 4.5) {\n      return (\n        <Badge variant=\"secondary\" className=\"absolute top-2 left-2 bg-green-100 text-green-800\">\n          <Zap className=\"w-3 h-3 mr-1\" />\n          Được đề xuất\n        </Badge>\n      );\n    }\n\n    return null;\n  };\n\n  const renderPriceSection = () => {\n    return (\n      <div className=\"flex items-center gap-2 mb-2\">\n        <span className=\"text-lg font-bold text-red-600\">\n          {formatPrice(result.price)}\n        </span>\n        {result.originalPrice && result.originalPrice > result.price && (\n          <>\n            <span className=\"text-sm text-gray-500 line-through\">\n              {formatPrice(result.originalPrice)}\n            </span>\n            <Badge variant=\"destructive\" className=\"text-xs\">\n              -{Math.round((1 - result.price / result.originalPrice) * 100)}%\n            </Badge>\n          </>\n        )}\n      </div>\n    );\n  };\n\n  const renderRatingSection = () => {\n    if (!result.rating) return null;\n\n    return (\n      <div className=\"flex items-center gap-1 mb-2\">\n        <div className=\"flex items-center\">\n          <Star className=\"w-4 h-4 fill-yellow-400 text-yellow-400\" />\n          <span className=\"text-sm font-medium ml-1\">{result.rating}</span>\n        </div>\n        {result.reviewCount && (\n          <span className=\"text-xs text-gray-500\">({result.reviewCount} đánh giá)</span>\n        )}\n      </div>\n    );\n  };\n\n  const renderLocationSection = () => {\n    if (!result.location) return null;\n\n    return (\n      <div className=\"flex items-center gap-1 text-xs text-gray-500 mb-2\">\n        <MapPin className=\"w-3 h-3\" />\n        <span>{result.location}</span>\n      </div>\n    );\n  };\n\n  const renderStockStatus = () => {\n    return (\n      <div className=\"mb-3\">\n        {result.inStock ? (\n          <Badge variant=\"outline\" className=\"text-green-600 border-green-600\">\n            Còn hàng\n          </Badge>\n        ) : (\n          <Badge variant=\"outline\" className=\"text-red-600 border-red-600\">\n            Hết hàng\n          </Badge>\n        )}\n      </div>\n    );\n  };\n\n  const renderOptimizationDetails = () => {\n    if (!showOptimizationInfo || !result.optimizationMetadata) return null;\n\n    const { optimizationMetadata } = result;\n    \n    return (\n      <div className=\"mt-3 p-2 bg-gray-50 rounded text-xs\">\n        <div className=\"font-medium mb-1\">Điểm tối ưu hóa:</div>\n        <div className=\"grid grid-cols-2 gap-1\">\n          <div>Liên quan: {optimizationMetadata.baseScore.toFixed(1)}</div>\n          <div>Cá nhân: {optimizationMetadata.personalizedScore.toFixed(1)}</div>\n          <div>Xu hướng: {optimizationMetadata.trendingScore.toFixed(1)}</div>\n          <div>Vị trí: {optimizationMetadata.locationScore.toFixed(1)}</div>\n          <div>Mùa vụ: {optimizationMetadata.seasonalScore.toFixed(1)}</div>\n          <div>Phổ biến: {optimizationMetadata.popularityScore.toFixed(1)}</div>\n        </div>\n        {result.relevanceScore && (\n          <div className=\"mt-1 font-medium\">\n            Điểm tổng: {result.relevanceScore.toFixed(2)}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  if (viewMode === 'list') {\n    return (\n      <Card \n        className={cn(\n          \"group cursor-pointer hover:shadow-lg transition-all duration-200 relative overflow-hidden\",\n          !result.inStock && \"opacity-75\",\n          className\n        )}\n        onClick={handleCardClick}\n      >\n        {renderOptimizationBadge()}\n        \n        <div className=\"flex gap-4 p-4\">\n          {/* Hình ảnh sản phẩm */}\n          <div className=\"relative w-24 h-24 flex-shrink-0\">\n            <img\n              src={result.imageUrl}\n              alt={result.title}\n              className=\"w-full h-full object-cover rounded-md group-hover:scale-105 transition-transform duration-200\"\n              loading=\"lazy\"\n            />\n          </div>\n\n          {/* Thông tin sản phẩm */}\n          <div className=\"flex-1 min-w-0\">\n            <h3 className=\"font-medium text-sm line-clamp-2 mb-2 group-hover:text-blue-600 transition-colors\">\n              {result.title}\n            </h3>\n            \n            {result.description && (\n              <p className=\"text-xs text-gray-600 line-clamp-2 mb-2\">\n                {result.description}\n              </p>\n            )}\n\n            <div className=\"flex gap-1 mb-2\">\n              {result.category && (\n                <Badge variant=\"outline\" className=\"text-xs\">\n                  {result.category}\n                </Badge>\n              )}\n              {result.brand && (\n                <Badge variant=\"outline\" className=\"text-xs\">\n                  {result.brand}\n                </Badge>\n              )}\n            </div>\n\n            {renderRatingSection()}\n            {renderLocationSection()}\n            {renderPriceSection()}\n            {renderStockStatus()}\n          </div>\n\n          {/* Nút hành động */}\n          <div className=\"flex flex-col gap-2 justify-center\">\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className={cn(\n                \"p-2 rounded-full\",\n                isWishlisted && \"text-red-500\"\n              )}\n              onClick={handleToggleWishlist}\n            >\n              <Heart \n                className={cn(\n                  \"w-4 h-4\",\n                  isWishlisted && \"fill-current\"\n                )} \n              />\n            </Button>\n            <Button\n              size=\"sm\"\n              onClick={handleAddToCart}\n              disabled={!result.inStock}\n            >\n              <ShoppingCart className=\"w-4 h-4\" />\n            </Button>\n          </div>\n        </div>\n\n        {/* Optimization Details (Debug Mode) */}\n        {showOptimizationInfo && (\n          <div className=\"px-4 pb-4\">\n            {renderOptimizationDetails()}\n          </div>\n        )}\n      </Card>\n    );\n  }\n\n  // Grid view\n  return (\n    <Card \n      className={cn(\n        \"group cursor-pointer hover:shadow-lg transition-all duration-200 relative overflow-hidden\",\n        !result.inStock && \"opacity-75\",\n        className\n      )}\n      onClick={handleCardClick}\n    >\n      {renderOptimizationBadge()}\n      \n      <div className=\"relative\">\n        <img\n          src={result.imageUrl}\n          alt={result.title}\n          className=\"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-200\"\n          loading=\"lazy\"\n        />\n        \n        {/* Wishlist button */}\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          className={cn(\n            \"absolute top-2 right-2 p-2 rounded-full bg-white/80 hover:bg-white\",\n            isWishlisted && \"text-red-500\"\n          )}\n          onClick={handleToggleWishlist}\n        >\n          <Heart \n            className={cn(\n              \"w-4 h-4\",\n              isWishlisted && \"fill-current\"\n            )} \n          />\n        </Button>\n      </div>\n\n      <CardContent className=\"p-4\">\n        {/* Title */}\n        <h3 className=\"font-medium text-sm line-clamp-2 mb-2 group-hover:text-blue-600 transition-colors\">\n          {result.title}\n        </h3>\n\n        {/* Description */}\n        {result.description && (\n          <p className=\"text-xs text-gray-600 line-clamp-2 mb-2\">\n            {result.description}\n          </p>\n        )}\n\n        {/* Category and Brand */}\n        <div className=\"flex gap-1 mb-2\">\n          {result.category && (\n            <Badge variant=\"outline\" className=\"text-xs\">\n              {result.category}\n            </Badge>\n          )}\n          {result.brand && (\n            <Badge variant=\"outline\" className=\"text-xs\">\n              {result.brand}\n            </Badge>\n          )}\n        </div>\n\n        {/* Rating */}\n        {renderRatingSection()}\n\n        {/* Location */}\n        {renderLocationSection()}\n\n        {/* Price */}\n        {renderPriceSection()}\n\n        {/* Stock Status */}\n        {renderStockStatus()}\n\n        {/* Add to Cart Button */}\n        <Button\n          className=\"w-full mt-2\"\n          size=\"sm\"\n          onClick={handleAddToCart}\n          disabled={!result.inStock}\n        >\n          <ShoppingCart className=\"w-4 h-4 mr-2\" />\n          {result.inStock ? 'Thêm vào giỏ' : 'Hết hàng'}\n        </Button>\n\n        {/* Optimization Details (Debug Mode) */}\n        {renderOptimizationDetails()}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default SearchResultCard;","import React from 'react';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport { Pagination, PaginationContent, PaginationItem, PaginationLink, PaginationNext, PaginationPrevious } from '@/components/ui/pagination';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { ToggleGroup, ToggleGroupItem } from '@/components/ui/toggle-group';\nimport { AlertCircle, Info, Grid, List } from 'lucide-react';\nimport { SearchResponse } from '@/services/searchService';\nimport SearchResultCard from './SearchResultCard';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { ChevronLeft, ChevronRight, SlidersHorizontal } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\ninterface SearchResultsListProps {\n  searchResponse: SearchResponse | null;\n  isLoading?: boolean;\n  error?: string | null;\n  onAddToCart?: (productId: string) => void;\n  onToggleWishlist?: (productId: string) => void;\n  onProductClick?: (productId: string) => void;\n  onPageChange?: (page: number) => void;\n  wishlistedItems?: Set<string>;\n  viewMode?: 'grid' | 'list';\n  onViewModeChange?: (mode: 'grid' | 'list') => void;\n  showOptimizationInfo?: boolean;\n  onToggleOptimizationInfo?: () => void;\n  className?: string;\n}\n\nexport const SearchResultsList: React.FC<SearchResultsListProps> = ({\n  searchResponse,\n  isLoading = false,\n  error = null,\n  onAddToCart,\n  onToggleWishlist,\n  onProductClick,\n  onPageChange,\n  wishlistedItems = new Set(),\n  viewMode = 'grid',\n  onViewModeChange,\n  showOptimizationInfo = false,\n  onToggleOptimizationInfo,\n  className\n}) => {\n  const renderLoadingSkeleton = () => {\n    return (\n      <div className={cn(\n        \"grid gap-4\",\n        viewMode === 'grid' \n          ? \"grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4\" \n          : \"grid-cols-1\"\n      )}>\n        {Array.from({ length: 8 }).map((_, index) => (\n          <div key={index} className=\"space-y-3\">\n            <Skeleton className=\"h-48 w-full\" />\n            <div className=\"space-y-2\">\n              <Skeleton className=\"h-4 w-3/4\" />\n              <Skeleton className=\"h-4 w-1/2\" />\n              <Skeleton className=\"h-6 w-1/4\" />\n            </div>\n          </div>\n        ))}\n      </div>\n    );\n  };\n\n  const renderError = () => {\n    if (!error) return null;\n\n    return (\n      <Alert className=\"my-4\">\n        <AlertDescription>\n          {error}\n        </AlertDescription>\n      </Alert>\n    );\n  };\n\n  const renderEmptyState = () => {\n    if (!searchResponse || searchResponse.results.length > 0) return null;\n\n    return (\n      <div className=\"text-center py-12\">\n        <div className=\"text-gray-500 mb-4\">\n          <svg className=\"mx-auto h-12 w-12\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n          </svg>\n        </div>\n        <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n          Không tìm thấy sản phẩm nào\n        </h3>\n        <p className=\"text-gray-500\">\n          Hãy thử tìm kiếm với từ khóa khác hoặc điều chỉnh bộ lọc\n        </p>\n      </div>\n    );\n  };\n\n  const renderResultsHeader = () => {\n    if (!searchResponse || isLoading) return null;\n\n    return (\n      <div className=\"flex items-center justify-between mb-6\">\n        <div className=\"flex items-center gap-4\">\n          <div className=\"text-sm text-gray-600\">\n            Hiển thị {searchResponse.results.length} trong số {searchResponse.total} sản phẩm\n            {searchResponse.searchTime && (\n              <span className=\"ml-2\">({searchResponse.searchTime}ms)</span>\n            )}\n          </div>\n        </div>\n\n        <div className=\"flex items-center gap-2\">\n          {/* Optimization Info Toggle */}\n          {onToggleOptimizationInfo && (\n            <Button\n              variant={showOptimizationInfo ? \"default\" : \"outline\"}\n              size=\"sm\"\n              onClick={onToggleOptimizationInfo}\n              className=\"text-xs\"\n            >\n              <SlidersHorizontal className=\"w-4 h-4 mr-1\" />\n              Debug\n            </Button>\n          )}\n\n          {/* View Mode Toggle */}\n          {onViewModeChange && (\n            <div className=\"flex border rounded-md\">\n              <Button\n                variant={viewMode === 'grid' ? \"default\" : \"ghost\"}\n                size=\"sm\"\n                onClick={() => onViewModeChange('grid')}\n                className=\"rounded-r-none\"\n              >\n                <Grid className=\"w-4 h-4\" />\n              </Button>\n              <Button\n                variant={viewMode === 'list' ? \"default\" : \"ghost\"}\n                size=\"sm\"\n                onClick={() => onViewModeChange('list')}\n                className=\"rounded-l-none\"\n              >\n                <List className=\"w-4 h-4\" />\n              </Button>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  const renderResults = () => {\n    if (!searchResponse || searchResponse.results.length === 0) return null;\n\n    return (\n      <div className={cn(\n        viewMode === 'grid' \n          ? \"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\"\n          : \"space-y-4\"\n      )}>\n        {searchResponse.results.map((result) => (\n          <SearchResultCard\n              key={result.id}\n              result={result}\n              onAddToCart={onAddToCart}\n              onToggleWishlist={onToggleWishlist}\n              onProductClick={onProductClick}\n              isWishlisted={wishlistedItems?.includes(result.id)}\n              showOptimizationInfo={showOptimizationInfo}\n              viewMode={viewMode}\n              className={viewMode === 'list' ? 'w-full' : ''}\n            />\n        ))}\n      </div>\n    );\n  };\n\n  const renderPagination = () => {\n    if (!searchResponse || !onPageChange || searchResponse.totalPages <= 1) return null;\n\n    const { currentPage, totalPages } = searchResponse;\n    const maxVisiblePages = 5;\n    const startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));\n    const endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);\n\n    return (\n      <div className=\"flex items-center justify-center gap-2 mt-8\">\n        {/* Previous Button */}\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={() => onPageChange(currentPage - 1)}\n          disabled={currentPage <= 1}\n        >\n          <ChevronLeft className=\"w-4 h-4\" />\n          Trước\n        </Button>\n\n        {/* Page Numbers */}\n        {startPage > 1 && (\n          <>\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => onPageChange(1)}\n            >\n              1\n            </Button>\n            {startPage > 2 && <span className=\"px-2\">...</span>}\n          </>\n        )}\n\n        {Array.from({ length: endPage - startPage + 1 }, (_, i) => startPage + i).map((page) => (\n          <Button\n            key={page}\n            variant={page === currentPage ? \"default\" : \"outline\"}\n            size=\"sm\"\n            onClick={() => onPageChange(page)}\n          >\n            {page}\n          </Button>\n        ))}\n\n        {endPage < totalPages && (\n          <>\n            {endPage < totalPages - 1 && <span className=\"px-2\">...</span>}\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => onPageChange(totalPages)}\n            >\n              {totalPages}\n            </Button>\n          </>\n        )}\n\n        {/* Next Button */}\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={() => onPageChange(currentPage + 1)}\n          disabled={currentPage >= totalPages}\n        >\n          Sau\n          <ChevronRight className=\"w-4 h-4\" />\n        </Button>\n      </div>\n    );\n  };\n\n  const renderSuggestions = () => {\n    if (!searchResponse?.suggestions || searchResponse.suggestions.length === 0) return null;\n\n    return (\n      <div className=\"mb-6\">\n        <h3 className=\"text-sm font-medium text-gray-700 mb-2\">Có thể bạn muốn tìm:</h3>\n        <div className=\"flex flex-wrap gap-2\">\n          {searchResponse.suggestions.map((suggestion, index) => (\n            <Button\n              key={index}\n              variant=\"outline\"\n              size=\"sm\"\n              className=\"text-xs\"\n              onClick={() => {\n                // Handle suggestion click - this would typically trigger a new search\n                console.log('Suggestion clicked:', suggestion);\n              }}\n            >\n              {suggestion.text}\n            </Button>\n          ))}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className={cn(\"w-full\", className)}>\n      {renderError()}\n      \n      {isLoading ? (\n        renderLoadingSkeleton()\n      ) : (\n        <>\n          {renderResultsHeader()}\n          {renderSuggestions()}\n          {renderResults()}\n          {renderEmptyState()}\n          {renderPagination()}\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default SearchResultsList;","import React, { useState, useEffect, useCallback } from 'react';\nimport { useSearchParams, useNavigate } from 'react-router-dom';\nimport { Helmet } from 'react-helmet-async';\nimport { toast } from 'sonner';\nimport { searchService, SearchQuery, SearchResponse } from '../services/searchService';\nimport { Product } from '../types';\nimport { useDebounce } from '../hooks/useDebounce';\nimport { cn } from '../lib/utils';\nimport { analytics } from '../lib/analytics';\nimport { SearchBar } from '../components/search/SearchBar';\nimport { SearchFilters } from '../components/search/SearchFilters';\nimport SearchResultsList from '../components/search/SearchResultsList';\nimport { Button } from '../components/ui/button';\nimport { Sheet, SheetContent, SheetTrigger } from '../components/ui/sheet';\nimport { Filter, X } from 'lucide-react';\n\n// Mock products data for initialization\nconst mockProducts = [\n  {\n    id: '1',\n    name: 'iPhone 15 Pro Max 256GB',\n    description: 'Điện thoại iPhone 15 Pro Max với chip A17 Pro mạnh mẽ',\n    price: 29990000,\n    originalPrice: 32990000,\n    discount: 9,\n    rating: 4.8,\n    reviewCount: 1250,\n    imageUrl: 'https://images.unsplash.com/photo-1592750475338-74b7b21085ab?w=400',\n    location: 'TP. Hồ Chí Minh',\n    isLiked: false,\n    isFreeShipping: true,\n    soldCount: 2500,\n    category: 'Điện thoại',\n    brand: 'Apple',\n    inStock: true,\n    tags: ['flagship', 'camera', 'gaming'],\n    sku: 'IP15PM256',\n    createdAt: '2024-01-15T00:00:00Z'\n  },\n  {\n    id: '2',\n    name: 'Samsung Galaxy S24 Ultra',\n    description: 'Flagship Samsung với S Pen và camera 200MP',\n    price: 26990000,\n    originalPrice: 29990000,\n    discount: 10,\n    rating: 4.7,\n    reviewCount: 980,\n    imageUrl: 'https://images.unsplash.com/photo-1610945265064-0e34e5519bbf?w=400',\n    location: 'Hà Nội',\n    isLiked: false,\n    isFreeShipping: true,\n    soldCount: 1800,\n    category: 'Điện thoại',\n    brand: 'Samsung',\n    inStock: true,\n    tags: ['flagship', 's-pen', 'camera'],\n    sku: 'SGS24U',\n    createdAt: '2024-01-10T00:00:00Z'\n  },\n  {\n    id: '3',\n    name: 'MacBook Pro 14\" M3',\n    description: 'Laptop MacBook Pro với chip M3 cho hiệu suất vượt trội',\n    price: 52990000,\n    originalPrice: 54990000,\n    discount: 4,\n    rating: 4.9,\n    reviewCount: 650,\n    imageUrl: 'https://images.unsplash.com/photo-1541807084-5c52b6b3adef?w=400',\n    location: 'TP. Hồ Chí Minh',\n    isLiked: false,\n    isFreeShipping: true,\n    soldCount: 450,\n    category: 'Laptop',\n    brand: 'Apple',\n    inStock: true,\n    tags: ['professional', 'creative', 'performance'],\n    sku: 'MBP14M3',\n    createdAt: '2024-01-05T00:00:00Z'\n  },\n  {\n    id: '4',\n    name: 'Dell XPS 13 Plus',\n    description: 'Laptop Dell XPS 13 Plus với thiết kế premium',\n    price: 35990000,\n    originalPrice: 38990000,\n    discount: 8,\n    rating: 4.6,\n    reviewCount: 420,\n    imageUrl: 'https://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=400',\n    location: 'Đà Nẵng',\n    isLiked: false,\n    isFreeShipping: true,\n    soldCount: 320,\n    category: 'Laptop',\n    brand: 'Dell',\n    inStock: true,\n    tags: ['ultrabook', 'business', 'portable'],\n    sku: 'DXPS13P',\n    createdAt: '2024-01-12T00:00:00Z'\n  },\n  {\n    id: '5',\n    name: 'AirPods Pro 2',\n    description: 'Tai nghe không dây AirPods Pro thế hệ 2',\n    price: 6490000,\n    originalPrice: 6990000,\n    discount: 7,\n    rating: 4.8,\n    reviewCount: 2100,\n    imageUrl: 'https://images.unsplash.com/photo-1606220945770-b5b6c2c55bf1?w=400',\n    location: 'TP. Hồ Chí Minh',\n    isLiked: false,\n    isFreeShipping: true,\n    soldCount: 5200,\n    category: 'Tai nghe',\n    brand: 'Apple',\n    inStock: true,\n    tags: ['wireless', 'noise-cancelling', 'premium'],\n    sku: 'APP2',\n    createdAt: '2024-01-08T00:00:00Z'\n  }\n];\n\nexport function SearchPage() {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const navigate = useNavigate();\n  \n  // State\n  const [query, setQuery] = useState<SearchQuery>({});\n  const [searchResponse, setSearchResponse] = useState<SearchResponse | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [isFiltersOpen, setIsFiltersOpen] = useState(false);\n  const [wishlistedItems, setWishlistedItems] = useState<Set<string>>(new Set());\n  const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid');\n  const [showOptimizationInfo, setShowOptimizationInfo] = useState(false);\n  const [isInitialized, setIsInitialized] = useState(false);\n  \n  const debouncedQuery = useDebounce(query, 500);\n  \n  // Initialize search service\n  useEffect(() => {\n    if (!isInitialized) {\n      searchService.init(mockProducts);\n      setIsInitialized(true);\n    }\n  }, [isInitialized]);\n  \n  // Parse URL parameters\n  useEffect(() => {\n    const urlQuery: SearchQuery = {\n      q: searchParams.get('q') || undefined,\n      category: searchParams.get('category') || undefined,\n      brand: searchParams.get('brand') || undefined,\n      minPrice: searchParams.get('minPrice') ? Number(searchParams.get('minPrice')) : undefined,\n      maxPrice: searchParams.get('maxPrice') ? Number(searchParams.get('maxPrice')) : undefined,\n      rating: searchParams.get('rating') ? Number(searchParams.get('rating')) : undefined,\n      inStock: searchParams.get('inStock') === 'true' ? true : undefined,\n      tags: searchParams.get('tags')?.split(',').filter(Boolean) || undefined,\n      sortBy: searchParams.get('sortBy') || 'relevance',\n      page: searchParams.get('page') ? Number(searchParams.get('page')) : 1,\n      limit: searchParams.get('limit') ? Number(searchParams.get('limit')) : 20\n    };\n    \n    setQuery(urlQuery);\n  }, [searchParams]);\n  \n  // Update URL when query changes\n  const updateURL = useCallback((newQuery: SearchQuery) => {\n    const params = new URLSearchParams();\n    \n    Object.entries(newQuery).forEach(([key, value]) => {\n      if (value !== undefined && value !== null && value !== '') {\n        if (Array.isArray(value)) {\n          if (value.length > 0) {\n            params.set(key, value.join(','));\n          }\n        } else {\n          params.set(key, String(value));\n        }\n      }\n    });\n    \n    setSearchParams(params, { replace: true });\n  }, [setSearchParams]);\n  \n  // Perform search\n  const performSearch = useCallback(async (searchQuery: SearchQuery) => {\n    if (!isInitialized) return;\n    \n    setIsLoading(true);\n    setError(null);\n    \n    try {\n      const searchResult = await searchService.search(searchQuery);\n      setSearchResponse(searchResult);\n      \n      // Track search analytics\n      if (searchQuery.q) {\n        analytics.track('search', {\n          search_term: searchQuery.q,\n          search_filters: {\n            category: searchQuery.category,\n            brand: searchQuery.brand,\n            price_range: searchQuery.minPrice || searchQuery.maxPrice ? {\n              min: searchQuery.minPrice,\n              max: searchQuery.maxPrice\n            } : undefined,\n            rating: searchQuery.rating,\n            in_stock: searchQuery.inStock,\n            tags: searchQuery.tags,\n            sort_by: searchQuery.sortBy\n          },\n          results_count: searchResult.products.length,\n          total_results: searchResult.total,\n          page: searchQuery.page || 1,\n          source: 'search_page'\n        });\n      }\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Có lỗi xảy ra khi tìm kiếm';\n      setError(errorMessage);\n      toast.error(errorMessage);\n      \n      // Track search error\n      if (searchQuery.q) {\n        analytics.track('search_error', {\n          search_term: searchQuery.q,\n          error_message: errorMessage,\n          source: 'search_page'\n        });\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  }, [isInitialized]);\n  \n  // Search when debounced query changes\n  useEffect(() => {\n    if (isInitialized && Object.keys(debouncedQuery).length > 0) {\n      performSearch(debouncedQuery);\n    }\n  }, [debouncedQuery, performSearch, isInitialized]);\n  \n  // Handle query change\n  const handleQueryChange = useCallback((newQuery: SearchQuery) => {\n    setQuery(newQuery);\n    updateURL(newQuery);\n  }, [updateURL]);\n  \n  // Handle search from search bar\n  const handleSearch = useCallback((searchText: string) => {\n    const newQuery = {\n      ...query,\n      q: searchText,\n      page: 1\n    };\n    handleQueryChange(newQuery);\n  }, [query, handleQueryChange]);\n  \n  // Handle clear filters\n  const handleClearFilters = useCallback(() => {\n    const newQuery: SearchQuery = {\n      q: query.q,\n      sortBy: 'relevance',\n      page: 1,\n      limit: 20\n    };\n    handleQueryChange(newQuery);\n  }, [query.q, handleQueryChange]);\n  \n  // Handle product click\n  const handleProductClick = useCallback((productId: string) => {\n    // Track product click from search results\n    if (searchResponse && query.q) {\n      const product = searchResponse.products.find(p => p.id === productId);\n      const position = searchResponse.products.findIndex(p => p.id === productId) + 1;\n      \n      if (product) {\n        analytics.trackEcommerce('select_item', {\n          currency: 'VND',\n          value: product.price,\n          items: [{\n            item_id: product.id,\n            item_name: product.name,\n            item_category: product.category,\n            item_brand: product.brand,\n            price: product.price,\n            quantity: 1,\n            index: position\n          }]\n        });\n        \n        analytics.track('search_result_click', {\n          search_term: query.q,\n          product_id: productId,\n          product_name: product.name,\n          position: position,\n          source: 'search_page'\n        });\n      }\n    }\n    \n    navigate(`/product/${productId}`);\n  }, [navigate, searchResponse, query.q]);\n\n  // Handle add to cart\n  const handleAddToCart = useCallback((productId: string) => {\n    // TODO: Implement add to cart logic\n    toast.success('Đã thêm sản phẩm vào giỏ hàng');\n  }, []);\n\n  // Handle toggle wishlist\n  const handleToggleWishlist = useCallback((productId: string) => {\n    setWishlistedItems(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(productId)) {\n        newSet.delete(productId);\n        toast.success('Đã xóa khỏi danh sách yêu thích');\n      } else {\n        newSet.add(productId);\n        toast.success('Đã thêm vào danh sách yêu thích');\n      }\n      return newSet;\n    });\n  }, []);\n\n  // Handle page change\n  const handlePageChange = useCallback((page: number) => {\n    const newQuery = {\n      ...query,\n      page\n    };\n    handleQueryChange(newQuery);\n  }, [query, handleQueryChange]);\n\n  // Handle view mode change\n  const handleViewModeChange = useCallback((mode: 'grid' | 'list') => {\n    setViewMode(mode);\n  }, []);\n\n  // Handle toggle optimization info\n  const handleToggleOptimizationInfo = useCallback(() => {\n    setShowOptimizationInfo(prev => !prev);\n  }, []);\n  \n  // Generate page title\n  const getPageTitle = () => {\n    if (query.q) {\n      return `Tìm kiếm \"${query.q}\" - Yapee Vietnam`;\n    }\n    return 'Tìm kiếm sản phẩm - Yapee Vietnam';\n  };\n  \n  // Generate meta description\n  const getMetaDescription = () => {\n    if (query.q) {\n      return `Tìm kiếm sản phẩm \"${query.q}\" trên Yapee Vietnam. Hàng ngàn sản phẩm chính hãng với giá tốt nhất.`;\n    }\n    return 'Tìm kiếm và mua sắm hàng ngàn sản phẩm chính hãng trên Yapee Vietnam với giá tốt nhất.';\n  };\n  \n  return (\n    <>\n      <Helmet>\n        <title>{getPageTitle()}</title>\n        <meta name=\"description\" content={getMetaDescription()} />\n        <meta property=\"og:title\" content={getPageTitle()} />\n        <meta property=\"og:description\" content={getMetaDescription()} />\n        <meta property=\"og:type\" content=\"website\" />\n        {query.q && (\n          <meta name=\"keywords\" content={`${query.q}, mua sắm online, yapee vietnam`} />\n        )}\n      </Helmet>\n      \n      <div className=\"min-h-screen bg-background\">\n        {/* Header */}\n        <div className=\"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 sticky top-0 z-40\">\n          <div className=\"container mx-auto px-4 py-4\">\n            <div className=\"flex items-center gap-4\">\n              {/* Logo */}\n              <button\n                onClick={() => navigate('/')}\n                className=\"text-2xl font-bold text-primary hover:opacity-80 transition-opacity\"\n              >\n                Yapee\n              </button>\n              \n              {/* Search Bar */}\n              <div className=\"flex-1 max-w-2xl\">\n                <SearchBar\n                  onSearch={handleSearch}\n                  onFilterClick={() => setIsFiltersOpen(true)}\n                  placeholder=\"Tìm kiếm sản phẩm, thương hiệu, danh mục...\"\n                  showFilters={false} // Hide on mobile, show in sheet\n                  autoFocus={!query.q}\n                />\n              </div>\n              \n              {/* Mobile Filter Button */}\n              <div className=\"lg:hidden\">\n                <Sheet open={isFiltersOpen} onOpenChange={setIsFiltersOpen}>\n                  <SheetTrigger asChild>\n                    <Button variant=\"outline\" size=\"sm\">\n                      <Filter className=\"h-4 w-4 mr-2\" />\n                      Lọc\n                    </Button>\n                  </SheetTrigger>\n                  <SheetContent side=\"left\" className=\"w-80 overflow-y-auto\">\n                    <div className=\"flex items-center justify-between mb-6\">\n                      <h2 className=\"text-lg font-semibold\">Bộ lọc tìm kiếm</h2>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => setIsFiltersOpen(false)}\n                      >\n                        <X className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                    {searchResponse && (\n                      <SearchFilters\n                        filters={searchResponse.filters}\n                        currentQuery={query}\n                        onFiltersChange={handleQueryChange}\n                        onClearFilters={handleClearFilters}\n                        isMobile\n                      />\n                    )}\n                  </SheetContent>\n                </Sheet>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        {/* Main Content */}\n        <div className=\"container mx-auto px-4 py-6\">\n          <div className=\"flex gap-6\">\n            {/* Desktop Filters */}\n            <div className=\"hidden lg:block\">\n              {searchResponse && (\n                <SearchFilters\n                  filters={searchResponse.filters}\n                  currentQuery={query}\n                  onFiltersChange={handleQueryChange}\n                  onClearFilters={handleClearFilters}\n                />\n              )}\n            </div>\n            \n            {/* Results */}\n            <div className=\"flex-1 min-w-0\">\n              <SearchResultsList\n                searchResponse={searchResponse}\n                isLoading={isLoading}\n                error={error}\n                onAddToCart={handleAddToCart}\n                onToggleWishlist={handleToggleWishlist}\n                onProductClick={handleProductClick}\n                onPageChange={handlePageChange}\n                wishlistedItems={wishlistedItems}\n                viewMode={viewMode}\n                onViewModeChange={handleViewModeChange}\n                showOptimizationInfo={showOptimizationInfo}\n                onToggleOptimizationInfo={handleToggleOptimizationInfo}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default SearchPage;"],"names":["SlidersHorizontal","createLucideIcon","SearchBar","onSearch","onFilterClick","placeholder","className","showFilters","autoFocus","query","setQuery","useState","isOpen","setIsOpen","suggestions","setSuggestions","searchHistory","setSearchHistory","trendingSearches","setTrendingSearches","isLoading","setIsLoading","inputRef","useRef","dropdownRef","abortControllerRef","debouncedQuery","useDebounce","useEffect","searchService","loadTrendingSearches","trending","error","handleSearch","useCallback","searchQuery","analytics","handleInputChange","e","value","handleKeyPress","_a","handleSuggestionClick","suggestion","handleHistoryClick","historyItem","clearSearch","clearHistory","handleClickOutside","event","showDropdown","jsx","cn","jsxs","Search","Input","Button","X","Filter","index","Clock","item","TrendingUp","FilterSection","title","children","defaultOpen","Collapsible","CollapsibleTrigger","ChevronUp","ChevronDown","CollapsibleContent","SearchFiltersContent","filters","currentQuery","onFiltersChange","onClearFilters","localQuery","setLocalQuery","priceRange","setPriceRange","applyFilters","handleCategoryChange","category","checked","prev","handleBrandChange","brand","currentBrands","newBrands","b","handleRatingChange","rating","handleLocationChange","location","handleShippingChange","option","currentShipping","newShipping","s","handlePriceRangeChange","range","handleAvailabilityChange","type","handleTagChange","tag","currentTags","t","formatPrice","price","activeFiltersCount","Badge","Checkbox","Label","Slider","Fragment","isChecked","_","i","Star","Truck","MapPin","SearchFilters","props","Sheet","SheetTrigger","SheetContent","SheetHeader","SheetTitle","SheetDescription","SearchResultCard","result","onAddToCart","onToggleWishlist","onProductClick","isWishlisted","showOptimizationInfo","viewMode","handleCardClick","handleAddToCart","handleToggleWishlist","renderOptimizationBadge","optimizationMetadata","Zap","renderPriceSection","renderRatingSection","renderLocationSection","renderStockStatus","renderOptimizationDetails","Card","Heart","ShoppingCart","CardContent","SearchResultsList","searchResponse","onPageChange","wishlistedItems","onViewModeChange","onToggleOptimizationInfo","renderLoadingSkeleton","Skeleton","renderError","Alert","AlertDescription","renderEmptyState","renderResultsHeader","Grid","List","renderResults","renderPagination","currentPage","totalPages","maxVisiblePages","startPage","endPage","ChevronLeft","page","ChevronRight","renderSuggestions","mockProducts","SearchPage","searchParams","setSearchParams","useSearchParams","navigate","useNavigate","setSearchResponse","setError","isFiltersOpen","setIsFiltersOpen","setWishlistedItems","setViewMode","setShowOptimizationInfo","isInitialized","setIsInitialized","urlQuery","updateURL","newQuery","params","key","performSearch","searchResult","err","errorMessage","toast","handleQueryChange","searchText","handleClearFilters","handleProductClick","productId","product","p","position","newSet","handlePageChange","handleViewModeChange","mode","handleToggleOptimizationInfo","getPageTitle","getMetaDescription","Helmet"],"mappings":"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","x_google_ignoreList":[0]}